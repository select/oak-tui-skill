{"id":"oak-tui-skill-06t","title":"Fix lint errors in tmux-manager.ts","description":"## Lint Errors\n\n### Unused functions\n- getWindowPanes (line 128)\n- ensureBackgroundWindow (line 311)\n\n### Unused parameter\n- projectPath in createPaneAtPath() (line 326)\n\n## Fix\nRemove unused functions or prefix with underscore. Prefix unused param with underscore.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:22:10.302678165+01:00","updated_at":"2026-02-23T13:05:05.633486388+01:00","deleted_at":"2026-02-23T13:05:05.633486388+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-0yh","title":"DRY: Consolidate crash recovery handlers","description":"In worktree-tui.ts lines 183-210, the uncaughtException and unhandledRejection handlers have identical logic. Extract to a shared crashRecovery function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:16.411533248+01:00","updated_at":"2026-02-23T12:51:13.189670518+01:00","closed_at":"2026-02-23T12:51:13.189670518+01:00"}
{"id":"oak-tui-skill-1f3","title":"Auto-expand projects with active or background panes on startup","description":"## Problem\n\nWhen oak-tui starts, all projects in the Projects tab are collapsed by default. Users have to manually expand projects to see their worktrees, even if those projects have active panes or background panes with running processes.\n\nThis makes it hard to quickly see which worktrees have active panes, especially after a restart when panes have been auto-discovered.\n\n## Desired Behavior\n\nOn startup, automatically expand projects that have:\n1. Active panes (panes in the main session)\n2. Background panes (panes in oak-bg session)\n\nThis provides immediate visibility into which worktrees have running processes without requiring manual expansion.\n\n## Current Behavior\n\nIn `project-manager.ts` (line 187-200), `buildProjectNodes()` sets `isExpanded` based on whether the project is active:\n\n```typescript\nisExpanded: project.path === currentGitRoot, // Only expand if current project\n```\n\nThis only expands the project that oak-tui was launched from, not projects with background panes.\n\n## Implementation Approach\n\n**Option A: Expand projects with any panes**\n- Check if any worktree in the project has a background pane\n- Set `isExpanded: true` if `hasBackgroundPane(wt.path)` returns true for any worktree\n- This shows all projects with running processes\n\n**Option B: Expand only active project + projects with background panes**\n- Keep current behavior (expand active project)\n- Additionally expand projects that have background panes\n- More selective than Option A\n\n**Recommendation: Option A** - Users want to see all their active work, regardless of which project oak-tui was launched from.\n\n## Technical Details\n\nModify `buildProjectNodes()` in `project-manager.ts`:\n\n```typescript\nexport function buildProjectNodes(\n  recentProjects: RecentProject[],\n  currentGitRoot: string,\n): ProjectNode[] {\n  return recentProjects.map((project) =\u003e {\n    const worktrees = getWorktrees(project.path);\n    \n    // Check if any worktree has a background pane\n    const hasAnyPane = worktrees.some(wt =\u003e hasBackgroundPane(wt.path));\n    \n    return {\n      path: project.path,\n      name: basename(project.path),\n      worktrees,\n      isExpanded: project.path === currentGitRoot || hasAnyPane, // Expand if active OR has panes\n      isActive: project.path === currentGitRoot,\n    };\n  });\n}\n```\n\n**Note**: Need to import `hasBackgroundPane` from tmux-manager.ts\n\n## Files to Modify\n\n- `scripts/lib/project-manager.ts`: \n  - Import `hasBackgroundPane` from tmux-manager\n  - Update `buildProjectNodes()` to check for background panes\n  - Set `isExpanded: true` for projects with panes\n\n## Acceptance Criteria\n\n- [ ] On startup, projects with background panes are automatically expanded\n- [ ] Projects without panes remain collapsed\n- [ ] Active project (where oak-tui was launched) is still expanded\n- [ ] Dots (indicators) are visible for worktrees with panes without manual expansion\n- [ ] No performance impact from checking background panes","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-17T18:17:01.960613207+01:00","updated_at":"2026-02-23T13:05:05.570647014+01:00","deleted_at":"2026-02-23T13:05:05.570647014+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-1w7","title":"Rename data directory from git-worktree-manager to oak-tui","description":"## Overview\n\nRename the application data directory from `~/.local/share/git-worktree-manager` to `~/.local/share/oak-tui` to better reflect the project's branding.\n\n## Current State\n\nThe data directory path `git-worktree-manager` is used in **16 locations** across the codebase:\n\n### Code Files (10 occurrences)\n1. `scripts/worktree-tui.ts:94` - DEBUG_LOG_PATH constant\n2. `scripts/worktree-tui.ts:112` - DATA_DIR constant\n3. `scripts/lib/socket-manager.ts:8` - DATA_DIR constant\n4. `scripts/lib/theme-manager.ts:8` - DATA_DIR constant\n5. `scripts/lib/project-manager.ts:9` - DATA_DIR constant\n6. `scripts/lib/tmux-manager.ts:10` - DATA_DIR constant\n7. `scripts/components/issue-popup.ts:18` - hardcoded path\n8. `scripts/launch.sh:7` - SOCKET_PATH variable\n9. `package.json:2` - package name\n10. `bun.lock:6` - package name reference\n\n### Documentation Files (6 occurrences)\n11. `AGENTS.md:32` - debug log path example\n12. `AGENTS.md:199` - data storage documentation\n13. `AGENTS.md:237` - debug log path example\n14. `SKILL.md:13` - DATA_FILE path\n15. `SKILL.md:91` - debug log documentation\n16. `SKILL.md:94` - debug log path example\n\n## Existing Data Files\n\nThe directory `~/.local/share/git-worktree-manager/` currently contains:\n- `recent-projects.json` (190 bytes) - recent project history\n- `ui-state.json` (29 bytes) - UI state (active tab, etc.)\n- `background-panes.json` (219 bytes) - tmux pane tracking\n- `config.json` (25 bytes) - configuration\n- `debug.log` (422 KB) - debug logs\n- `tui.sock` - Unix socket for single-instance enforcement\n\n## Required Changes\n\n### 1. Code Updates\nReplace all occurrences of `git-worktree-manager` with `oak-tui` in:\n- `scripts/worktree-tui.ts` (2 occurrences)\n- `scripts/lib/socket-manager.ts` (1 occurrence)\n- `scripts/lib/theme-manager.ts` (1 occurrence)\n- `scripts/lib/project-manager.ts` (1 occurrence)\n- `scripts/lib/tmux-manager.ts` (1 occurrence)\n- `scripts/components/issue-popup.ts` (1 occurrence)\n- `scripts/launch.sh` (1 occurrence)\n- `package.json` (1 occurrence - package name)\n\n### 2. Documentation Updates\nUpdate all references in:\n- `AGENTS.md` (3 occurrences)\n- `SKILL.md` (3 occurrences)\n\n### 3. Lock File\n- `bun.lock` will be automatically updated when package.json changes\n\n### 4. Data Migration Strategy\n\n**Option A: Automatic Migration (Recommended)**\nAdd migration logic to check for old directory and move data:\n```typescript\nconst OLD_DATA_DIR = join(homedir(), \".local\", \"share\", \"git-worktree-manager\");\nconst NEW_DATA_DIR = join(homedir(), \".local\", \"share\", \"oak-tui\");\n\nif (existsSync(OLD_DATA_DIR) \u0026\u0026 !existsSync(NEW_DATA_DIR)) {\n  renameSync(OLD_DATA_DIR, NEW_DATA_DIR);\n  debugLog(\"Migrated data directory to oak-tui\");\n}\n```\n\n**Option B: Manual Migration**\nDocument migration steps for users:\n```bash\nmv ~/.local/share/git-worktree-manager ~/.local/share/oak-tui\n```\n\n**Option C: Fresh Start**\nSimply change the path and let users start fresh (loses history)\n\n## Implementation Checklist\n\n- [ ] Update all code file paths (8 TypeScript/shell files)\n- [ ] Update package.json name field\n- [ ] Run `bun install` to update bun.lock\n- [ ] Update documentation files (AGENTS.md, SKILL.md)\n- [ ] Implement data migration strategy (choose Option A, B, or C)\n- [ ] Test with existing data directory\n- [ ] Test with fresh installation (no existing directory)\n- [ ] Verify socket path works correctly\n- [ ] Verify all data files are accessible after migration\n- [ ] Update any symlinks or references in ~/.config/opencode/skills/\n\n## Testing Scenarios\n\n1. **Existing user with data**: Verify migration preserves all files\n2. **Fresh install**: Verify new directory is created correctly\n3. **Socket functionality**: Verify single-instance enforcement still works\n4. **Data persistence**: Verify recent projects, UI state, themes persist\n5. **Debug logging**: Verify debug logs write to new location\n\n## Notes\n\n- The Unix socket (`tui.sock`) is ephemeral and recreated on each launch\n- Debug logs can be large (422 KB in current installation) - consider rotation\n- Background panes tracking may reference old paths internally - verify after migration","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-02-17T01:43:00.672237831+01:00","updated_at":"2026-02-23T13:05:05.597472656+01:00","deleted_at":"2026-02-23T13:05:05.597472656+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"task"}
{"id":"oak-tui-skill-29b","title":"Hide expand arrow for projects without worktrees","description":"## Problem\n\nCurrently, all projects display an expand/collapse arrow (‚ñ∂/‚ñº) regardless of whether they have any worktrees. This creates visual clutter and misleading UI, especially for:\n- Non-git directories (e.g., test-non-git-dir)\n- Git repositories with no worktrees\n- Projects where git worktree commands fail\n\n**Expected behavior:** Only show the expand arrow if the project has worktrees that can be displayed.\n\n## Current Behavior\n\nAll projects show an expand arrow:\n- **test-non-git-dir** ‚Üí Shows ‚ñ∂ arrow (but has no worktrees to expand)\n- **oak-tui-skill** ‚Üí Shows ‚ñº arrow (has 1 worktree) ‚úì\n- **hub** ‚Üí Shows ‚ñº arrow (has 4 worktrees) ‚úì\n\nWhen clicking the arrow on a project with no worktrees:\n- The arrow changes from ‚ñ∂ to ‚ñº\n- But nothing appears below (no children to show)\n- Creates confusing UX\n\n## Desired Behavior\n\nOnly show expand arrow if `node.worktrees.length \u003e 0`:\n- **test-non-git-dir** ‚Üí No arrow (has 0 worktrees)\n- **oak-tui-skill** ‚Üí Show ‚ñ∂/‚ñº arrow (has 1 worktree) ‚úì\n- **hub** ‚Üí Show ‚ñ∂/‚ñº arrow (has 4 worktrees) ‚úì\n\nProjects without worktrees should:\n- Display without any expand/collapse arrow\n- Not be expandable (clicking does nothing)\n- Show just the project name with appropriate styling\n\n## Implementation Notes\n\n### Location: ui-renderer.ts:457\n\nCurrent code always shows an arrow:\n```typescript\nconst expandIcon = isExpanded ? \"\\u{25BC}\" : \"\\u{25B6}\";\n```\n\nProposed change:\n```typescript\nconst expandIcon = node.worktrees.length \u003e 0 \n  ? (isExpanded ? \"\\u{25BC}\" : \"\\u{25B6}\")\n  : \"\";\n```\n\n### Additional Changes Needed\n\n1. **Expand icon rendering** (line 493-497):\n   - Only render `expandIconText` if `node.worktrees.length \u003e 0`\n   - Or set content to empty string and let it render nothing\n\n2. **Mouse click handler** (lines 505-526):\n   - Add check: `if (node.worktrees.length === 0) return;`\n   - Prevent toggling expand state for projects without worktrees\n\n3. **Keyboard handler** (worktree-tui.ts:836-871):\n   - Add check: `if (selectedProject.worktrees.length === 0) return;`\n   - Prevent Enter/Left/Right from toggling projects without worktrees\n\n### Edge Cases to Consider\n\n- **Empty git repos:** Projects that are git repos but have no worktrees yet\n- **Git command failures:** Projects where `getWorktrees()` returns empty array due to errors\n- **Non-git directories:** Projects added to recent list that aren't git repos\n\nAll these cases should show no arrow since `worktrees.length === 0`.\n\n## Acceptance Criteria\n\n- [ ] Projects with `worktrees.length === 0` show no expand arrow\n- [ ] Projects with `worktrees.length \u003e 0` show expand arrow (‚ñ∂ or ‚ñº)\n- [ ] Clicking on projects without worktrees does nothing (no expand/collapse)\n- [ ] Keyboard navigation (Enter/Left/Right) does nothing on projects without worktrees\n- [ ] Visual layout remains clean (no extra spacing where arrow was removed)\n- [ ] No regressions for projects with worktrees\n\n## Visual Example\n\n**Before:**\n```\n‚ñ∂ test-non-git-dir\n‚ñº oak-tui-skill\n  ‚éá oak-tui-skill ‚óè\n‚ñ∂ empty-git-repo\n```\n\n**After:**\n```\ntest-non-git-dir\n‚ñº oak-tui-skill\n  ‚éá oak-tui-skill ‚óè\nempty-git-repo\n```","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-18T16:56:18.648391107+01:00","updated_at":"2026-02-23T13:05:05.562813705+01:00","deleted_at":"2026-02-23T13:05:05.562813705+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-2c4","title":"Oak-tui loses track of panes in main session on restart","description":"## Problem\n\nWhen oak-tui restarts, it loses track of panes that exist in the main tmux session (session 0) and are not in the oak-bg background session. This causes users to lose access to panes with running processes.\n\n## Real-World Example\n\nAfter oak-tui restart:\n- Pane `%3` existed at `/home/linux-falko/Dev/hub+EN-4960` with a running zsh process\n- Pane was in main session (session 0), not in oak-bg\n- `background-panes.json` had no entry for this pane\n- When user tried to switch to hub+EN-4960 worktree, oak-tui created a NEW pane instead of recovering the existing one\n- User lost access to the running process in pane %3\n\n## Root Cause\n\n**Issue 1: Panes in main session are not tracked**\n- `switchToWorktree()` creates panes in main session initially\n- Only moves them to oak-bg when switching AWAY from them\n- If oak-tui is killed before switching away, the pane stays in main session\n- On restart, `loadBackgroundPanes()` only loads from JSON, doesn't discover existing panes\n\n**Issue 2: No auto-discovery on startup**\n- `initTmuxManager()` calls `loadBackgroundPanes()` and `cleanupStalePanes()`\n- `cleanupStalePanes()` only removes stale entries, doesn't discover new panes\n- No mechanism to scan main session for orphaned panes that should be tracked\n\n**Issue 3: Panes not moved to oak-bg immediately**\n- When `switchToWorktree()` creates a new pane (line 244), it's created in main session\n- It's only moved to oak-bg when user switches to a DIFFERENT worktree\n- If oak-tui crashes/restarts before switching, pane is orphaned\n\n## Desired Behavior\n\n1. On startup, oak-tui should discover existing panes in main session that belong to tracked projects\n2. Auto-adopt orphaned panes and add them to background tracking\n3. Alternatively, move newly created panes to oak-bg immediately (not just when switching away)\n\n## Technical Details\n\n**Current flow (line 204-210 in tmux-manager.ts):**\n```typescript\nif (leftPaneId == null) {\n  // No left pane, just create one\n  createPaneAtPath(worktreePath, projectPath);\n  return; // \u003c-- Pane created but NOT tracked or moved to oak-bg\n}\n```\n\n**createPaneAtPath (line 310-323):**\n- Creates pane in main session\n- Does NOT track it in backgroundPanes\n- Does NOT move it to oak-bg\n- Pane is orphaned if oak-tui restarts\n\n**Potential solutions:**\n\n**Option A: Auto-discover on startup**\n- In `initTmuxManager()`, scan all panes in main session\n- Match pane paths against recent projects/worktrees\n- Auto-adopt panes that match known worktrees\n- Add to backgroundPanes tracking\n\n**Option B: Track immediately on creation**\n- When creating new pane in `createPaneAtPath()`, immediately move to oak-bg\n- Track in backgroundPanes right away\n- Recover it immediately (since we want it visible)\n\n**Option C: Persist active pane separately**\n- Track the \"currently active\" pane separately from background panes\n- On restart, check if active pane still exists\n- If yes, don't create new pane, use existing one\n\n## Files to Modify\n\n- `scripts/lib/tmux-manager.ts`:\n  - Add `discoverOrphanedPanes()` function\n  - Call from `initTmuxManager()`\n  - OR modify `createPaneAtPath()` to track immediately\n\n## Acceptance Criteria\n\n- [ ] When oak-tui restarts, existing panes in main session are discovered and tracked\n- [ ] Users can recover panes with running processes after oak-tui restart\n- [ ] No panes are orphaned when oak-tui crashes/restarts\n- [ ] Green dots appear next to worktrees that have existing panes (even after restart)","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T17:08:27.969211659+01:00","updated_at":"2026-02-23T13:05:05.578613121+01:00","deleted_at":"2026-02-23T13:05:05.578613121+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-3cq","title":"Create renderBeads() UI function for vertical kanban layout","description":"## Summary\nCreate the UI rendering function for displaying beads issues in a vertical kanban-style layout.\n\n## File Location\n`scripts/lib/ui-renderer.ts`\n\n## Function Signature\n```typescript\nexport function renderBeads(\n  renderer: CliRenderer,\n  contentScroll: ScrollBoxRenderable,\n  groupedIssues: GroupedIssues,\n  renderCounter: number,\n  selectedIndex: number,\n  onSelectIssue: (issue: BeadsIssue) =\u003e void,\n): void\n```\n\n## Layout Structure\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ ‚ïê‚ïê Blocked (0) ‚ïê‚ïê           ‚îÇ  \u003c- Section header\n‚îÇ (no blocked issues)         ‚îÇ  \u003c- Empty state\n‚îÇ                             ‚îÇ\n‚îÇ ‚ïê‚ïê Ready (2) ‚ïê‚ïê             ‚îÇ\n‚îÇ [Feature] [Medium] id-xxx   ‚îÇ  \u003c- Issue row\n‚îÇ   Issue title truncated...  ‚îÇ\n‚îÇ [Bug] [High] id-yyy         ‚îÇ\n‚îÇ   Another issue title...    ‚îÇ\n‚îÇ                             ‚îÇ\n‚îÇ ‚ïê‚ïê In Progress (1) ‚ïê‚ïê       ‚îÇ\n‚îÇ [Task] [Medium] id-zzz      ‚îÇ\n‚îÇ   Working on something...   ‚îÇ\n‚îÇ                             ‚îÇ\n‚îÇ ‚ïê‚ïê Closed (3) ‚ïê‚ïê            ‚îÇ\n‚îÇ [Feature] [Low] id-aaa      ‚îÇ\n‚îÇ   Completed feature...      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Section Headers\n- Use `‚ïê‚ïê Status (count) ‚ïê‚ïê` format\n- Color: Primary accent (#fab283)\n- Add 1 line spacing between sections\n\n## Issue Card Layout\nEach issue is 2 lines:\n1. `[Type] [Priority] issue-id`\n2. `  Title (indented, truncated to fit)`\n\n## Badge Colors\n| Type | Color | Display |\n|------|-------|---------|\n| feature | #7fd88f | [Feature] |\n| bug | #e06c75 | [Bug] |\n| task | #5c9cf5 | [Task] |\n| epic | #c678dd | [Epic] |\n| chore | #808080 | [Chore] |\n\n| Priority | Color | Display |\n|----------|-------|---------|\n| 0 | #e06c75 | [Critical] |\n| 1 | #fab283 | [High] |\n| 2 | #e5c07b | [Medium] |\n| 3 | #5c9cf5 | [Low] |\n| 4 | #808080 | [Lowest] |\n\n## Selection Highlighting\n- Selected issue gets background: #3a3a3a\n- Track selection across all sections (flat index)\n\n## Mouse Handlers\n- onMouseDown: Select and trigger onSelectIssue callback\n- onMouseOver: Highlight background\n- onMouseOut: Remove highlight\n\n## Parent Issue\nThis is part of: Add Beads issues tab to Oak TUI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-16T15:37:42.373538848+01:00","updated_at":"2026-02-16T15:43:28.487533502+01:00","closed_at":"2026-02-16T15:43:28.487533502+01:00","dependencies":[{"issue_id":"oak-tui-skill-3cq","depends_on_id":"oak-tui-skill-6s2","type":"blocks","created_at":"2026-02-16T15:37:58.772691461+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"oak-tui-skill-3e5","title":"Create beads-manager.ts for fetching and parsing beads issues","description":"## Summary\nCreate a new module to handle fetching and parsing beads issues data for the Beads tab.\n\n## File Location\n`scripts/lib/beads-manager.ts`\n\n## Functions to Implement\n\n### 1. fetchBeadsIssues()\n```typescript\nexport function fetchBeadsIssues(): BeadsIssue[] {\n  // Run: bd list --json\n  // Parse JSON output\n  // Return array of BeadsIssue\n}\n```\n\n### 2. groupIssuesByStatus()\n```typescript\nexport function groupIssuesByStatus(issues: BeadsIssue[]): GroupedIssues {\n  // Group into: blocked, ready (open), in_progress, closed\n  // Note: 'ready' = open issues with no blockers\n  // May need to use 'bd ready --json' for accurate ready list\n}\n```\n\n### 3. getPriorityLabel()\n```typescript\nexport function getPriorityLabel(priority: number): string {\n  // 0 -\u003e 'Critical', 1 -\u003e 'High', 2 -\u003e 'Medium', 3 -\u003e 'Low', 4 -\u003e 'Lowest'\n}\n```\n\n## Data Commands\n- `bd list --json` - All issues\n- `bd ready --json` - Ready issues (open, no blockers)\n- `bd list --status=blocked --json` - Blocked issues\n- `bd list --status=in_progress --json` - In progress issues\n- `bd list --status=closed --limit=10 --json` - Recent closed issues\n\n## Error Handling\n- Handle case where `bd` command is not available\n- Handle empty/invalid JSON output\n- Return empty arrays on error (don't crash TUI)\n\n## Parent Issue\nThis is part of: Add Beads issues tab to Oak TUI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-16T15:37:32.510022208+01:00","updated_at":"2026-02-16T15:43:28.486589307+01:00","closed_at":"2026-02-16T15:43:28.486589307+01:00","dependencies":[{"issue_id":"oak-tui-skill-3e5","depends_on_id":"oak-tui-skill-6s2","type":"blocks","created_at":"2026-02-16T15:37:58.744914874+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"oak-tui-skill-3lm","title":"Use MarkdownRenderable for issue description in popup","description":"## Problem\n\nThe issue popup displays the description as plain text without any markdown formatting or syntax highlighting. Markdown elements like headers, code blocks, bold/italic text, and lists are shown as raw text.\n\n## Current Behavior\n\nIn `scripts/components/issue-popup.ts` (lines 189-207), the description is rendered using plain `TextRenderable`:\n\n```typescript\nconst descLines = issue.description.split(\"\\n\");\ndescLines.forEach((line, idx) =\u003e {\n  const lineText = new TextRenderable(renderer, {\n    id: \\`popup-desc-line-${renderCounter}-${idx}\\`,\n    content: line || \" \",\n    fg: theme.colors.text,\n  });\n  parent.add(lineText);\n});\n```\n\nThis just splits the description by newlines and renders each line as plain text.\n\n## Desired Behavior\n\nUse `MarkdownRenderable` from @opentui/core to properly render markdown with syntax highlighting.\n\n## Implementation Approach\n\n1. Import `MarkdownRenderable` from `@opentui/core`\n2. Create a `SyntaxStyle` instance (can use `SyntaxStyle.create()` or `SyntaxStyle.fromTheme()`)\n3. Replace the TextRenderable loop with a single MarkdownRenderable:\n\n```typescript\nimport { MarkdownRenderable, SyntaxStyle } from \"@opentui/core\";\n\n// In renderIssuePopup:\nif (issue.description) {\n  const descLabel = new TextRenderable(renderer, {\n    id: \\`popup-desc-label-${renderCounter}\\`,\n    content: \"Description\",\n    fg: theme.colors.primary,\n  });\n  parent.add(descLabel);\n\n  const syntaxStyle = SyntaxStyle.create(); // or fromTheme() with custom theme\n  const descMarkdown = new MarkdownRenderable(renderer, {\n    id: \\`popup-desc-md-${renderCounter}\\`,\n    content: issue.description,\n    syntaxStyle: syntaxStyle,\n    conceal: true, // Hide markdown syntax characters\n  });\n  parent.add(descMarkdown);\n}\n```\n\n## MarkdownRenderable API\n\nFrom `@opentui/core`:\n- `content: string` - The markdown content\n- `syntaxStyle: SyntaxStyle` - Required, controls syntax highlighting colors\n- `conceal?: boolean` - Hide markdown syntax (default: true)\n- `streaming?: boolean` - For incremental updates\n- `treeSitterClient?: TreeSitterClient` - Optional for code block highlighting\n\n## Files to Modify\n\n- `scripts/components/issue-popup.ts` - Replace TextRenderable loop with MarkdownRenderable (lines 189-207)\n\n## Notes\n\n- May need to create a theme-aware SyntaxStyle that uses the app's color scheme\n- Consider caching the SyntaxStyle instance to avoid recreating it on each render","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-16T23:17:15.803521196+01:00","updated_at":"2026-02-16T23:18:58.627225456+01:00","closed_at":"2026-02-16T23:18:58.627225456+01:00"}
{"id":"oak-tui-skill-4bx","title":"Stabilize projects tree order","status":"closed","priority":2,"issue_type":"bug","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-25T12:45:34.69655679+01:00","created_by":"select","updated_at":"2026-02-25T12:47:53.665360999+01:00","closed_at":"2026-02-25T12:47:53.665360999+01:00","close_reason":"Closed"}
{"id":"oak-tui-skill-4qc","title":"Board tab: Make issue text fill full width","description":"## Summary\nThe issue cards in the Board tab don't fill the full width of the bordered sections, leaving empty space on the right side.\n\n## Current Behavior\n- Issue cards (badge line and title line) don't stretch to fill the section width\n- There's visible empty space between the text and the right border\n- The title gets truncated with \"...\" even though there's room for more text\n\n## Desired Behavior\n- Issue cards should fill the full width of the section box\n- Text should use the maximum available space\n- If text overflows to the right, it should be hidden (no wrapping, no ellipsis truncation mid-content)\n- Text simply gets cut off at the border edge\n\n## Root Cause\nThe issue card boxes likely don't have `width: \"100%\"` set, so they only take up as much space as their content needs.\n\n## Implementation\n\nIn `scripts/lib/ui-renderer.ts` in `renderBoard()`, ensure the issue card boxes have full width and overflow is hidden:\n\n```typescript\n// Issue card container\nconst issueCard = new BoxRenderable(renderer, {\n  id: `board-issue-${renderCounter}-${flatIndex}`,\n  width: \"100%\",  // \u003c-- Ensure this is set\n  flexDirection: \"column\",\n  overflow: \"hidden\",  // \u003c-- Hide overflow\n  // ...\n});\n\n// Badge line\nconst badgeLine = new BoxRenderable(renderer, {\n  id: `board-badges-${renderCounter}-${flatIndex}`,\n  width: \"100%\",  // \u003c-- Add this\n  flexDirection: \"row\",\n  gap: 1,\n});\n\n// Title text - remove manual truncation, let it overflow and hide\nconst titleText = new TextRenderable(renderer, {\n  id: `board-title-${renderCounter}-${flatIndex}`,\n  content: `  ${issue.title}`,  // \u003c-- Full title, no manual truncation\n  // ...\n});\n```\n\n## Files to Modify\n- `scripts/lib/ui-renderer.ts` - renderBoard() function\n\n## Acceptance Criteria\n- [ ] Issue cards fill the full width of the section box\n- [ ] Text uses maximum available horizontal space\n- [ ] Overflow text is hidden (cut off at border edge)\n- [ ] No manual \"...\" truncation - text just gets cut off naturally","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-16T15:50:45.466586838+01:00","updated_at":"2026-02-16T15:52:44.517894447+01:00","closed_at":"2026-02-16T15:52:44.517894447+01:00"}
{"id":"oak-tui-skill-4z9","title":"Pane indicators (dots) don't show for worktrees when panes are in subdirectories","description":"## Problem\n\nThe orange/purple dots that indicate active panes don't appear next to worktrees in the Projects tab when the actual pane is in a subdirectory of the worktree, rather than at the worktree root.\n\n## Real-World Example\n\nHub project worktrees:\n- `/home/linux-falko/Dev/hub` (main repo, EN-5026)\n- `/home/linux-falko/Dev/hub+EN-4960` (worktree)\n\nExisting panes:\n- Pane %1 at `/home/linux-falko/Dev/hub/api` (subdirectory)\n- Pane %2 at `/home/linux-falko/Dev/hub/ui` (subdirectory)\n\n**Result**: No dots appear next to the hub worktrees because `hasBackgroundPane()` checks for exact path match:\n- `hasBackgroundPane(\"/home/linux-falko/Dev/hub\")` ‚Üí false (pane is at /hub/api, not /hub)\n- `hasBackgroundPane(\"/home/linux-falko/Dev/hub+EN-4960\")` ‚Üí false (no pane at this path)\n\n## Root Cause\n\nIn `ui-renderer.ts` (line 539):\n```typescript\nconst hasBgPane = hasBackgroundPane(wt.path);\n```\n\nIn `tmux-manager.ts` (line 142):\n```typescript\nexport function hasBackgroundPane(worktreePath: string): boolean {\n  return backgroundPanes.has(worktreePath); // Exact path match only\n}\n```\n\nThe `backgroundPanes` Map uses exact paths as keys. If a user has a pane at `/project/api` but the worktree is `/project`, the dot won't show.\n\n## Desired Behavior\n\n**Option A: Hierarchical matching**\n- Show dot if a pane exists at the worktree path OR any subdirectory\n- `hasBackgroundPane(\"/hub\")` should return true if pane exists at `/hub/api`\n\n**Option B: Strict worktree root only**\n- Only show dots for panes at exact worktree root\n- Encourage users to create panes at worktree root, not subdirectories\n- This is cleaner but less flexible\n\n## Recommendation\n\n**Option A (hierarchical matching)** is more user-friendly because:\n1. Users often work in subdirectories (api/, ui/, etc.)\n2. The pane is still \"part of\" that worktree\n3. Clicking the worktree should still recover the pane (if recovery logic is updated)\n\n## Implementation (Option A)\n\nModify `hasBackgroundPane()` to check if any tracked pane path starts with the worktree path:\n\n```typescript\nexport function hasBackgroundPane(worktreePath: string): boolean {\n  // Exact match\n  if (backgroundPanes.has(worktreePath)) return true;\n  \n  // Check if any pane is in a subdirectory\n  for (const [panePath] of backgroundPanes) {\n    if (panePath.startsWith(worktreePath + '/')) {\n      return true;\n    }\n  }\n  \n  return false;\n}\n```\n\n**Note**: This also requires updating `switchToWorktree()` recovery logic to handle subdirectory panes.\n\n## Files to Modify\n\n- `scripts/lib/tmux-manager.ts`: Update `hasBackgroundPane()` for hierarchical matching\n- `scripts/lib/tmux-manager.ts`: Update `switchToWorktree()` to recover subdirectory panes\n\n## Acceptance Criteria\n\n- [ ] Dots appear next to worktrees when panes exist in subdirectories\n- [ ] Clicking a worktree recovers the subdirectory pane (or creates new one at root)\n- [ ] Exact path matches still work as before\n- [ ] No false positives (e.g., /hub-old shouldn't match /hub)","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T17:12:35.371247739+01:00","updated_at":"2026-02-23T13:05:05.574137831+01:00","deleted_at":"2026-02-23T13:05:05.574137831+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-54k","title":"Fix tsgolint errors in worktree-tui.ts","description":"## File: scripts/worktree-tui.ts (60 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to array/object params\n- strict-boolean-expressions: Handle nullable strings explicitly\n- prefer-nullish-coalescing: Use ?? instead of ||\n- no-unsafe-return: Type JSON.parse returns properly\n- no-base-to-string: Handle unknown types in String() calls\n\n### Key locations:\n- Line 76: debug(...args) param\n- Line 80: String(a) with unknown type\n- Line 93: JSON.parse unsafe return\n- Line 101: state param needs readonly\n- Line 116: setDebugFn callback param","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:11.346861574+01:00","updated_at":"2026-02-23T13:05:05.619762519+01:00","deleted_at":"2026-02-23T13:05:05.619762519+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-5l5","title":"DRY: Consolidate isRecord type guard","description":"The isRecord type guard function is duplicated in:\n- socket-manager.ts:24-26\n- project-manager.ts:18-20\n\nExtract to a shared type-guards.ts utility module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:21.22950128+01:00","updated_at":"2026-02-23T12:57:43.455390568+01:00","closed_at":"2026-02-23T12:57:43.455390568+01:00"}
{"id":"oak-tui-skill-6fh","title":"Remove dead code: search-bar.ts is completely unused","description":"The entire scripts/components/search-bar.ts file (113 lines) is never imported anywhere in the codebase. Functions createSearchBar, updateSearchBar, handleSearchKey are dead code. Either remove the file or integrate it into the codebase.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:03.813305156+01:00","updated_at":"2026-02-23T12:48:36.07583816+01:00","closed_at":"2026-02-23T12:48:36.07583816+01:00"}
{"id":"oak-tui-skill-6s2","title":"Add BeadsIssue and GroupedIssues types to types.ts","description":"## Summary\nAdd TypeScript interfaces for beads issue data structures.\n\n## File Location\n`scripts/lib/types.ts`\n\n## Types to Add\n\n### BeadsIssue Interface\n```typescript\nexport interface BeadsIssue {\n  id: string;\n  title: string;\n  description?: string;\n  status: BeadsStatus;\n  priority: number; // 0-4\n  issue_type: BeadsType;\n  created_at: string;\n  updated_at: string;\n  dependency_count: number;\n  dependent_count: number;\n  assignee?: string;\n  labels?: string[];\n}\n```\n\n### BeadsStatus Type\n```typescript\nexport type BeadsStatus = \"open\" | \"in_progress\" | \"blocked\" | \"closed\";\n```\n\n### BeadsType Type\n```typescript\nexport type BeadsType = \"task\" | \"bug\" | \"feature\" | \"epic\" | \"chore\";\n```\n\n### GroupedIssues Interface\n```typescript\nexport interface GroupedIssues {\n  blocked: BeadsIssue[];\n  ready: BeadsIssue[];      // open with no blockers\n  in_progress: BeadsIssue[];\n  closed: BeadsIssue[];\n}\n```\n\n### Update TabId\n```typescript\nexport type TabId = \"projects\" | \"files\" | \"themes\" | \"beads\";\n```\n\n## Parent Issue\nThis is part of: Add Beads issues tab to Oak TUI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-16T15:37:46.468333062+01:00","updated_at":"2026-02-16T15:43:28.483718516+01:00","closed_at":"2026-02-16T15:43:28.483718516+01:00"}
{"id":"oak-tui-skill-71w","title":"Fix lint errors in ui-renderer.ts","description":"## Lint Errors\n\n### Unused imports (lines 13, 16, 17, 25)\n- getPriorityLabel\n- getTypeIcon  \n- capitalize\n- ensureChildrenLoaded\n\n### Unused variable (line 616)\n- hasChildren\n\n## Fix\nRemove unused imports and prefix unused variable with underscore.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:22:09.017309306+01:00","updated_at":"2026-02-23T13:05:05.638707706+01:00","deleted_at":"2026-02-23T13:05:05.638707706+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-7gv","title":"Test issue for closed display","status":"closed","priority":2,"issue_type":"task","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-24T16:19:17.831860379+01:00","created_by":"select","updated_at":"2026-02-24T16:19:21.352671874+01:00","closed_at":"2026-02-24T16:19:21.352671874+01:00","close_reason":"Closed"}
{"id":"oak-tui-skill-7nh","title":"Migrate background-panes.json to new format on load","status":"in_progress","priority":2,"issue_type":"bug","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-25T14:45:13.848730129+01:00","created_by":"select","updated_at":"2026-02-25T14:45:17.99992251+01:00"}
{"id":"oak-tui-skill-801","title":"Add Shift+Tab to cycle tabs in reverse direction","description":"Currently Tab key cycles forward through tabs (Projects ‚Üí Files ‚Üí Board ‚Üí Projects). Add Shift+Tab to cycle in reverse direction (Projects ‚Üí Board ‚Üí Files ‚Üí Projects). Implementation: Add else-if branch in keyboard handler checking for shift modifier with tab key, use (currentIndex - 1 + TABS.length) % TABS.length for reverse cycling.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T16:13:53.578954921+01:00","updated_at":"2026-02-16T16:19:37.474520135+01:00","closed_at":"2026-02-16T16:19:37.474520135+01:00"}
{"id":"oak-tui-skill-8bt","title":"Allow deleting projects from the recent projects list","description":"## Summary\nAdd the ability to remove/delete projects from the recent projects list in the Projects tab.\n\n## Current Behavior\n- Projects are stored in `~/.local/share/git-worktree-manager/recent-projects.json`\n- Projects can be added to the list (automatically when accessed)\n- There is no way to remove projects from the list\n\n## Desired Behavior\n- Users should be able to delete/remove projects from the recent projects list\n- This should be accessible via keyboard (e.g., `d` or `Delete` key)\n- Optionally, a visual delete button/icon could be added to the UI\n\n## Implementation Notes\n\n### 1. Add delete function in `project-manager.ts`\nCreate a `removeRecentProject(projectPath: string)` function that:\n- Loads current projects from JSON\n- Filters out the project to delete\n- Writes the updated list back to the file\n\n### 2. Add keyboard binding in `worktree-tui.ts`\nIn the keyboard handler (around line 324), add a delete key binding:\n- Key: `d` or `Delete`\n- Only works when a project header is selected (not worktrees)\n- After deletion, reload the project list and adjust selectedIndex\n\n### 3. Update footer help text\nAdd delete key hint to the footer (e.g., `d: remove`)\n\n### 4. Consider confirmation (optional)\nSince delete is destructive, consider:\n- A simple confirmation (press `d` twice)\n- Or visual feedback before deletion\n\n## Relevant Files\n- `scripts/lib/project-manager.ts` - Add `removeRecentProject()` function (near line 131)\n- `scripts/worktree-tui.ts` - Add keyboard binding (around line 324-384)\n- `scripts/lib/ui-renderer.ts` - Optional: Add delete button to project header (around line 268-325)\n- Footer help text in `worktree-tui.ts` (around line 159-203)\n\n## Acceptance Criteria\n- [ ] User can delete a project from the list using keyboard\n- [ ] Deleted projects are removed from `recent-projects.json`\n- [ ] Selection index is properly adjusted after deletion\n- [ ] Footer shows the delete keybinding hint\n- [ ] Deleting the last project shows empty state","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T15:13:39.278457548+01:00","updated_at":"2026-02-16T16:13:16.407011547+01:00","closed_at":"2026-02-16T16:13:16.407011547+01:00"}
{"id":"oak-tui-skill-8k4","title":"DRY: Extract clipboard copy utility function","description":"Clipboard copy logic with xclip/xsel fallback is duplicated in worktree-tui.ts:\n- Lines 1149-1169\n- Lines 1303-1320\n\nExtract to a shared utility function like copyToClipboard(text: string): boolean.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:13.033354948+01:00","updated_at":"2026-02-23T12:52:03.953144034+01:00","closed_at":"2026-02-23T12:52:03.953144034+01:00"}
{"id":"oak-tui-skill-8mf","title":"Remove dead code: _hasChildren in ui-renderer.ts","description":"In ui-renderer.ts line 634, _hasChildren variable is assigned but never used. Remove it.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:15.332945371+01:00","updated_at":"2026-02-23T12:57:05.286155224+01:00","closed_at":"2026-02-23T12:57:05.286155224+01:00"}
{"id":"oak-tui-skill-8qg","title":"DRY: Extract DATA_DIR constant to shared module","description":"DATA_DIR constant is duplicated in 4 files:\n- worktree-tui.ts:124\n- project-manager.ts:10\n- theme-manager.ts:8\n- tmux-manager.ts:11\n\nExtract to a shared constants.ts or config.ts module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:05.220883975+01:00","updated_at":"2026-02-23T12:49:11.426505093+01:00","closed_at":"2026-02-23T12:49:11.426505093+01:00"}
{"id":"oak-tui-skill-97e","title":"Hide expand triangle for projects with no worktrees","description":"## Problem\nIn the Projects tab, the expand triangle (‚ñ∂/‚ñº) is always shown for every project, even when the project has no worktrees. This is misleading because clicking the triangle does nothing when there are no children to expand.\n\nThe Files tab correctly handles this by showing two spaces instead of an expand icon for files (non-directories).\n\n## Current Behavior\n- All projects show expand triangle regardless of worktree count\n- Clicking triangle on project with 0 worktrees toggles `expandedProjects` Set but shows no visual change\n- User cannot tell if a project has worktrees without trying to expand it\n\n## Expected Behavior\n- Projects with `worktrees.length === 0` should show two spaces instead of triangle\n- Projects with `worktrees.length \u003e 0` should show triangle (‚ñ∂ collapsed, ‚ñº expanded)\n- Consistent with file tree behavior where only directories show expand icons\n\n## When Can Projects Have No Worktrees?\n1. Project added to recent projects but all worktrees later removed/pruned\n2. Git command fails or repo is in invalid state\n3. Project path exists but `git worktree list` returns nothing\n4. Error in `getWorktrees()` returns empty array (catch block)\n\n## Implementation Notes\n\n### Current Code (ui-renderer.ts:454-507)\n\n**Line 456-457:**\n```typescript\nconst isExpanded = expandedProjects.has(node.path);\nconst expandIcon = isExpanded ? \"\\u{25BC}\" : \"\\u{25B6}\"; // Always shows icon\n```\n\n**Lines 493-505:**\n```typescript\nconst expandIconText = new TextRenderable(renderer, {\n  id: `project-expand-${renderCounter}-${i}`,\n  content: `${expandIcon} `,\n  fg: \"#666666\",\n});\n// ...\nprojectHeader.add(expandIconText); // Always added\n```\n\n**Line 530:** Worktrees only rendered if expanded AND has worktrees:\n```typescript\nif (isExpanded \u0026\u0026 node.worktrees.length \u003e 0) {\n  // render worktrees\n}\n```\n\n### File Tree Pattern (file-tree.ts:322)\n```typescript\nconst expandIcon = file.isDirectory ? (isExpanded ? \"‚ñº \" : \"‚ñ∂ \") : \"  \";\n```\nThis correctly shows two spaces for files (non-expandable items).\n\n### Proposed Fix\n\nChange line 457 in ui-renderer.ts:\n```typescript\n// Before:\nconst expandIcon = isExpanded ? \"\\u{25BC}\" : \"\\u{25B6}\";\n\n// After:\nconst expandIcon = node.worktrees.length \u003e 0\n  ? (isExpanded ? \"\\u{25BC}\" : \"\\u{25B6}\")\n  : \"  \"; // Two spaces when no worktrees\n```\n\n### Additional Consideration\nShould we also disable the click handler when `node.worktrees.length === 0`? Currently clicking still toggles the `expandedProjects` Set even though nothing happens visually.\n\n**Option 1:** Keep click handler (current behavior, just hide icon)\n- Pro: Simpler change\n- Con: Clicking still toggles internal state unnecessarily\n\n**Option 2:** Disable click handler when no worktrees\n- Pro: More correct behavior\n- Con: Requires conditional in `projectHeader.onMouse` handler (lines 508-526)\n\n**Recommendation:** Start with Option 1 (just hide icon), add Option 2 if needed.\n\n## Files to Modify\n- `scripts/lib/ui-renderer.ts` - Line 457 in `renderProjects()` function\n\n## Acceptance Criteria\n- [ ] Projects with 0 worktrees show two spaces instead of expand triangle\n- [ ] Projects with 1+ worktrees show ‚ñ∂ when collapsed\n- [ ] Projects with 1+ worktrees show ‚ñº when expanded\n- [ ] Visual alignment is preserved (two spaces match triangle width)\n- [ ] Behavior is consistent with file tree pattern\n\n## Visual Example\n\n**Before:**\n```\n‚ñ∂ project-with-worktrees\n‚ñ∂ project-without-worktrees  ‚Üê misleading, nothing to expand\n‚ñ∂ another-project\n```\n\n**After:**\n```\n‚ñ∂ project-with-worktrees\n  project-without-worktrees  ‚Üê no triangle, clearly no children\n‚ñ∂ another-project\n```","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-19T14:26:03.788918668+01:00","updated_at":"2026-02-23T13:05:05.548783537+01:00","deleted_at":"2026-02-23T13:05:05.548783537+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-9a3","title":"DRY: Extract IGNORED_DIRS to shared module","description":"IGNORED_DIRS constant is duplicated in:\n- file-tree.ts:33-46\n- beads-manager.ts:9-22\n\nExtract to a shared constants module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:08.012907267+01:00","updated_at":"2026-02-23T12:49:37.240960523+01:00","closed_at":"2026-02-23T12:49:37.240960523+01:00"}
{"id":"oak-tui-skill-9lg","title":"Fix bold property error in ui-renderer.ts","description":"## Problem\n\nTypeScript error in `scripts/lib/ui-renderer.ts` at line 177:\n\n```\nError [175:5] Object literal may only specify known properties, and 'bold' does not exist in type 'TextOptions'.\n```\n\n## Current Code\n\n```typescript\nconst titleText = new TextRenderable(renderer, {\n  id: \"title-text\",\n  content: \"üå≥ Oak\",\n  fg: theme.colors.textMuted,\n  bold: true,  // \u003c-- Error: 'bold' does not exist in TextOptions\n  flexShrink: 0,\n});\n```\n\n## Root Cause\n\nSame issue as previously fixed in worktree-tui.ts (oak-tui-skill-rk5):\n- TextRenderable's TextOptions does not have a `bold` property\n- Bold styling must be achieved via the `attributes` bitmask property\n- Use `createTextAttributes({ bold: true })` helper function\n\n## Solution\n\nReplace `bold: true` with `attributes: createTextAttributes({ bold: true })`:\n\n```typescript\nimport { createTextAttributes } from \"@opentui/core\";\n\nconst titleText = new TextRenderable(renderer, {\n  id: \"title-text\",\n  content: \"üå≥ Oak\",\n  fg: theme.colors.textMuted,\n  attributes: createTextAttributes({ bold: true }),\n  flexShrink: 0,\n});\n```\n\n## Files to Modify\n\n- `scripts/lib/ui-renderer.ts` (line 177)\n\n## Related\n\n- oak-tui-skill-rk5 (closed) - Same issue was fixed in worktree-tui.ts","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-16T23:30:33.16180687+01:00","updated_at":"2026-02-16T23:45:11.764796331+01:00","closed_at":"2026-02-16T23:45:11.764796331+01:00"}
{"id":"oak-tui-skill-a9e","title":"Add visual selection indicator in debug mode","description":"## Problem\n\nWhen debugging the TUI or when an AI agent is testing the TUI via tmux capture, it's difficult to determine which line is currently selected because the selection is only indicated by a background color change (#3a3a3a) that may not be visible in tmux captures or screenshots.\n\n## Current Behavior\n\nSelection highlighting across all tabs (projects/board/files):\n- Uses gray background color (#3a3a3a) for selected items\n- No text color changes when selected\n- No additional visual indicators\n- Debug mode (--debug flag) only enables file logging to ~/.local/share/oak-tui/debug.log\n- No visual indicators in the UI itself when debug mode is active\n\n## Proposed Solution\n\nAdd a visual symbol/indicator at the beginning of the selected line when debug mode is enabled (--debug flag). This should:\n\n1. **Only appear when DEBUG mode is active** (process.argv.includes('--debug'))\n2. **Be visible in all three tabs**: projects, board, files\n3. **Use a clear symbol** like '‚Üí' or '‚ñ∂' or '‚óè' at the start of the line\n4. **Not interfere with normal operation** - only visual, no functional changes\n5. **Be easy to spot in tmux captures** for debugging and testing\n\n## Implementation Details\n\n### Files to Modify\n\n1. **scripts/lib/ui-renderer.ts**\n   - renderProjects() (lines 359-566): Add indicator for selected project/worktree\n   - renderBoard() (lines 757-905): Add indicator for selected issue\n   - renderFiles() (lines 603-684): Add indicator for selected file/folder\n\n2. **Pass DEBUG flag to rendering functions**\n   - Currently DEBUG is only in worktree-tui.ts\n   - Need to pass it to ui-renderer functions or import it there\n\n### Selection Logic Locations\n\n**Projects Tab** (ui-renderer.ts):\n- Line 398: `const projectIsSelected = selectedIndex === flatIndex`\n- Line 465: `const wtIsSelected = selectedIndex === flatIndex`\n\n**Board Tab** (ui-renderer.ts):\n- Line 802: `const isSelected = flatIndex === selectedIndex`\n\n**Files Tab** (ui-renderer.ts):\n- Line 634: `const isSelected = i === selectedIndex`\n\n### Suggested Implementation\n\nFor each tab, when rendering the text content:\n```typescript\nconst prefix = (DEBUG \u0026\u0026 isSelected) ? '‚Üí ' : '  ';\n// Prepend to the text content\n```\n\nOr use a colored indicator:\n```typescript\nif (DEBUG \u0026\u0026 isSelected) {\n  // Add a TextRenderable with '‚Üí' or '‚ñ∂' before the main content\n}\n```\n\n## Testing\n\n1. Launch TUI with --debug flag: `launch.sh --dev --debug`\n2. Navigate with j/k keys in each tab\n3. Capture tmux pane: `tmux capture-pane -t oak-tui -p`\n4. Verify the indicator appears on the selected line\n5. Verify it moves as selection changes\n6. Verify it doesn't appear without --debug flag\n\n## Benefits\n\n- Easier debugging for developers\n- AI agents can see which line is selected in tmux captures\n- Better testing and verification of keyboard navigation\n- No impact on normal operation (only in debug mode)\n\n## Related Code\n\n- Debug mode setup: scripts/worktree-tui.ts lines 104-120\n- Launch script: scripts/launch.sh lines 28-29, 108-116\n- Selection state: worktree-tui.ts lines 308-309 (selectedIndex, filesSelectedIndex)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-23T10:38:14.819158813+01:00","updated_at":"2026-02-23T12:38:40.770723391+01:00","closed_at":"2026-02-23T12:38:40.770723391+01:00"}
{"id":"oak-tui-skill-afu","title":"Add Ctrl+Left/Right and h/l keybindings for tab navigation","description":"## Current State\n\nTab navigation currently supports:\n- **Tab** - cycle forward through tabs\n- **Shift+Tab** - cycle backward through tabs  \n- **1-4** - direct tab selection by number\n\n## Requested Enhancement\n\nAdd additional keybindings for tab navigation to provide more intuitive options:\n\n### New Keybindings\n- **Ctrl+Left** / **Ctrl+h** - navigate to previous tab\n- **Ctrl+Right** / **Ctrl+l** - navigate to next tab\n\n### Implementation Details\n\n**Location**: `scripts/worktree-tui.ts`\n\n**Current Tab Logic** (lines 590-609):\n- Shift+Tab cycles backward (lines 590-599)\n- Tab cycles forward (lines 600-609)\n- Uses `TABS.findIndex()` to find current tab\n- Wraps around using modulo arithmetic\n\n**Required Changes**:\n1. Add keyboard event handlers for Ctrl+Left, Ctrl+Right, Ctrl+h, Ctrl+l\n2. Check `key.ctrl` modifier in the keypress handler\n3. Reuse existing tab cycling logic (same as Tab/Shift+Tab)\n4. Ensure proper wrapping behavior\n\n**Key Event Structure**:\n```typescript\nkeyInput.on('keypress', (key: Readonly\u003cKeyEvent\u003e) =\u003e {\n  const keyName: string = key.name;\n  // key.ctrl - boolean for Ctrl modifier\n  // key.shift - boolean for Shift modifier\n})\n```\n\n**Tab State Management**:\n- `activeTab` variable holds current tab (type: TabId)\n- `saveUIState({ activeTab })` persists state to `~/.local/share/git-worktree-manager/ui-state.json`\n- `selectedIndex = 0` resets selection when switching tabs\n- `updateContent()` re-renders UI\n\n### Testing Checklist\n- [ ] Ctrl+Left navigates to previous tab with wrapping\n- [ ] Ctrl+Right navigates to next tab with wrapping\n- [ ] Ctrl+h navigates to previous tab (vim-style)\n- [ ] Ctrl+l navigates to next tab (vim-style)\n- [ ] Tab state persists across navigation\n- [ ] Selection index resets when switching tabs\n- [ ] All four tabs (Projects, Board, Files, Themes) are accessible","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-17T01:22:14.827517071+01:00","updated_at":"2026-02-23T13:05:05.60045994+01:00","deleted_at":"2026-02-23T13:05:05.60045994+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-bm6","title":"Fix background pane detection for worktrees","status":"closed","priority":2,"issue_type":"bug","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-25T12:45:34.267709725+01:00","created_by":"select","updated_at":"2026-02-25T12:47:53.656774608+01:00","closed_at":"2026-02-25T12:47:53.656774608+01:00","close_reason":"Closed"}
{"id":"oak-tui-skill-bvj","title":"Remove dead code: unused variables in beads-manager.ts","description":"Dead variables in beads-manager.ts:\n- Line 294: _total variable assigned but never used\n- Line 305: _section variable assigned but never used\n\nAlso getTypeIcon function (lines 426-441) is exported but never imported/used anywhere.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:14.409773772+01:00","updated_at":"2026-02-23T12:51:15.332665604+01:00","closed_at":"2026-02-23T12:51:15.332665604+01:00"}
{"id":"oak-tui-skill-c2g","title":"Unify keyboard navigation across projects, files, and board views","description":"## Problem\n\nKeyboard navigation is inconsistent across the three views (projects, files, board):\n\n### Current State\n\n| Feature | Projects View | Files View | Board View |\n|---------|---------------|------------|------------|\n| j/k navigation | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |\n| Arrow key navigation | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |\n| h/l for collapse/expand | ‚úÖ Yes | ‚ùå No | ‚ùå No |\n| Arrow left/right | ‚úÖ Yes | ‚ùå No | ‚ùå No |\n| selectedIndex tracking | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |\n| Visual selection highlight | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |\n| space/return action | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |\n| Search activation | ‚ùå No | Always active | ‚ùå No |\n| / for search | ‚ùå No | Stub only | ‚ùå No |\n\n### Key Issues\n\n1. **Files view has no keyboard navigation** - only mouse interaction works\n2. **Search in files is always on** - typing immediately filters, no explicit activation\n3. **Files view doesn't respect vim-style or arrow key navigation**\n4. **No visual selection indicator in files view**\n5. **Board view has j/k but NOT h/l for section navigation**\n6. **No search in projects or board views**\n\n## Desired Behavior\n\n### Unified Navigation\n- **j/k or Up/Down**: Move selection up/down\n- **h/l or Left/Right**: Collapse/expand (folders in files, projects in projects view)\n- **/**: Activate search mode (all views)\n- **Escape**: Exit search mode / clear search\n- **Enter/Space**: Activate selected item\n\n### Unified Search Component\nCreate a reusable search component that:\n- Lives at the bottom of the UI (consistent position across all views)\n- Activates with `/` in any view (projects, files, board)\n- Filters content contextually:\n  - **Projects view**: Filter by project name/path\n  - **Files view**: Filter by filename/path\n  - **Board view**: Filter by issue title/description\n- Shows search state visually (e.g., `/search query` or `üîç query`)\n- Deactivates with Escape (clears query and exits search mode)\n- Enter confirms search and returns to navigation mode (keeps filter active)\n\n## Implementation Notes\n\n### New Component: `scripts/components/search-bar.ts`\nCreate a dedicated search component:\n```typescript\ninterface SearchBarProps {\n  isActive: boolean;\n  query: string;\n  placeholder?: string;  // e.g., \"Search projects...\", \"Search files...\"\n  onQueryChange: (query: string) =\u003e void;\n  onActivate: () =\u003e void;\n  onDeactivate: () =\u003e void;\n}\n\n// Renders a search bar at the bottom of the content area\n// Shows placeholder when inactive, input field when active\n```\n\n### Files to modify:\n- `scripts/worktree-tui.ts` - Add files keyboard handler, integrate search component\n- `scripts/lib/ui-renderer.ts` - Update renderFiles() to show selectedIndex, add search bar rendering\n- `scripts/components/file-tree.ts` - Add helper to get file at index\n\n### New files:\n- `scripts/components/search-bar.ts` - Reusable search bar component\n\n### State changes:\n- `searchMode: boolean` - Whether search input is active (global)\n- `searchQuery: string` - Current search query (already exists, make global)\n- `filesSelectedIndex: number` - Track selection in files view\n\n### Key code locations:\n- Projects navigation: worktree-tui.ts:430-509\n- Files handler (incomplete): worktree-tui.ts:554-565\n- Board navigation: worktree-tui.ts:510-553\n\n### Search filtering logic per view:\n- **Projects**: Filter `projectNodes` by `node.name` or `node.path`\n- **Files**: Filter `fileTree` by `node.name` (already partially implemented)\n- **Board**: Filter beads issues by `title` or `description`","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T22:00:31.324989623+01:00","updated_at":"2026-02-16T22:27:16.360606134+01:00","closed_at":"2026-02-16T22:27:16.360606134+01:00"}
{"id":"oak-tui-skill-c7u","title":"Fix tsgolint errors in file-tree.ts and issue-popup.ts","description":"## Files:\n- scripts/components/file-tree.ts (15 errors)\n- scripts/components/issue-popup.ts (11 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to node/nodes params\n- strict-boolean-expressions: Handle nullable numbers/strings\n- prefer-nullish-coalescing: Use ?? instead of ||\n\n### Key locations in file-tree.ts:\n- Line 122: node param\n- Line 131: nodes param\n- Line 168: score || 0\n\n### Key locations in issue-popup.ts:\n- Various readonly param issues","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:21.07623657+01:00","updated_at":"2026-02-23T13:05:05.60701948+01:00","deleted_at":"2026-02-23T13:05:05.60701948+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-c9b","title":"Fix lint errors in worktree-tui.ts and beads-manager.ts","description":"## Lint Errors\n\n### worktree-tui.ts\n- Unused import 'basename' (line 8)\n- Unused param 'i' in TABS.forEach() (line 245)\n\n### beads-manager.ts\n- Unused var 'total' in getNextSectionStart() (line 167)\n- Unused var 'section' in getNextSectionStart() (line 178)\n\n## Fix\nRemove unused import. Prefix unused params/vars with underscore.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:22:13.183811151+01:00","updated_at":"2026-02-23T13:05:05.623130579+01:00","deleted_at":"2026-02-23T13:05:05.623130579+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-cpg","title":"Dynamic footer hints based on search state","description":"## Problem\nCurrently, the footer shows static hints (Tab, r, d, Ctrl+C) regardless of the search state. When users enter search mode and have filtered results, the available actions change but the footer doesn't reflect this.\n\n## Requirements\n\n### When search query is active (user pressed Enter after typing):\n- Show: **Enter: clear filter**\n- Show: **Esc: clear filter** \n- Show: **/: edit search**\n- Hide: **d: remove** (not applicable during filtered view)\n- Keep: **Tab: cycle** and **r: reload** and **Ctrl+C: exit**\n\n### When in search input mode (actively typing):\n- Show: **Enter: apply filter**\n- Show: **Esc: cancel**\n- Hide: **d: remove** (not applicable during search input)\n- Keep: **Tab: cycle** and **r: reload** and **Ctrl+C: exit**\n\n### When not searching:\n- Show current footer as-is: **Tab: cycle ‚Ä¢ r: reload ‚Ä¢ d: remove ‚Ä¢ Ctrl+C: exit**\n\n## Implementation Notes\n\n### Current Architecture\n- Footer is created in `createUIComponents()` in `scripts/lib/ui-renderer.ts:321-381`\n- Footer has 4 key-description pairs: footerKey1-4 and footerDesc1-4\n- Footer is a BoxRenderable with TextRenderable children\n- Currently static content set at initialization\n\n### Search State Variables (per tab)\n- `projectsSearchMode` - actively typing in projects tab\n- `projectsSearchQuery` - current query string in projects tab\n- `boardSearchMode` - actively typing in board tab\n- `boardSearchQuery` - current query string in board tab\n- `searchMode` - actively typing in files tab\n- `searchQuery` - current query string in files tab\n\n### Implementation Approach\n1. Add footer TextRenderable references to UIComponents interface (footerKey1-4, footerDesc1-4)\n2. Create a `updateFooter()` function that updates footer content based on:\n   - Current tab (activeTab)\n   - Search mode state (typing vs applied filter vs none)\n   - Search query content\n3. Call `updateFooter()` in these locations:\n   - After tab switch in `updateContent()`\n   - After search mode changes (entering/exiting search)\n   - After applying/clearing filters\n   - After pressing '/' to re-enter search from filtered state\n\n### Files to Modify\n- `scripts/lib/ui-renderer.ts` - Export footer TextRenderables in UIComponents\n- `scripts/worktree-tui.ts` - Add updateFooter() function and call it appropriately\n\n## Acceptance Criteria\n- [ ] Footer shows \"Enter: clear filter\" and \"Esc: clear filter\" when filtered results are displayed\n- [ ] Footer shows \"/: edit search\" when filtered results are displayed\n- [ ] Footer hides \"d: remove\" when in search mode or viewing filtered results\n- [ ] Footer shows \"Enter: apply filter\" and \"Esc: cancel\" when actively typing in search\n- [ ] Footer returns to default state when search is cleared\n- [ ] Behavior is consistent across all three tabs (projects, board, files)","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-19T11:41:26.741412927+01:00","updated_at":"2026-02-23T13:05:05.5573967+01:00","deleted_at":"2026-02-23T13:05:05.5573967+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-cqu","title":"Add 'q' key to quit the app gracefully","description":"Currently, quitting the app requires pressing Ctrl+C twice due to how signal handling works with the renderer's exitOnCtrlC option and the socket cleanup in socket-manager.ts. Users expect to be able to press 'q' to quit immediately.\n\n## Current Behavior\n- Ctrl+C requires two presses to fully quit\n- First press: renderer exits but socket cleanup handler (SIGINT in socket-manager.ts:179) still running\n- Second press: kills the remaining process\n- No 'q' key handler exists\n- **Ctrl+C also causes error: 'Cannot add child: Nodes with measure functions cannot have children. Aborted()'**\n\n## Root Cause\n1. Renderer created with exitOnCtrlC: true (worktree-tui.ts:277)\n2. Socket manager has separate SIGINT handler (socket-manager.ts:179-186)\n3. These two handlers may conflict, requiring double Ctrl+C\n4. The 'Cannot add child' error suggests the renderer is being torn down improperly, possibly trying to render while exiting\n\n## Proposed Solution\nAdd a 'q' key handler in the keyboard event listener that:\n1. Cleans up the socket file\n2. Clears any active intervals (boardRefreshInterval, projectsRefreshInterval)\n3. Properly disposes of the renderer to avoid 'Cannot add child' errors\n4. Calls process.exit(0) cleanly\n\n## Implementation Notes\n- Add handler in worktree-tui.ts keypress listener (around line 718)\n- Should work from any tab (projects, board, files, themes)\n- Should NOT trigger when in search mode (searchMode, projectsSearchMode, boardSearchMode)\n- Should NOT trigger when issue popup is visible\n- Call socket cleanup before exit\n- Ensure renderer is properly disposed/stopped before exit to prevent measure function errors\n- Consider also fixing the double Ctrl+C issue by coordinating signal handlers or disabling exitOnCtrlC and handling SIGINT manually","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-20T18:53:17.315364037+01:00","updated_at":"2026-02-23T13:05:05.538830039+01:00","deleted_at":"2026-02-23T13:05:05.538830039+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-dml","title":"DRY: Create hover handler factory function","description":"Identical onMouseOver/onMouseOut hover handlers are repeated in ui-renderer.ts:\n- Lines 407-422 (projects)\n- Lines 475-490 (worktrees)\n- Lines 649-664 (files)\n- Lines 873-885 (board issues)\n\nCreate a factory function like createHoverHandlers(state, index, onUpdate) to eliminate this duplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:11.902040224+01:00","updated_at":"2026-02-23T12:55:41.009057975+01:00","closed_at":"2026-02-23T12:55:41.009057975+01:00"}
{"id":"oak-tui-skill-dun","title":"DRY: Consolidate file tree utility functions","description":"File tree utilities are duplicated:\n- toMutableNode (file-tree.ts:186-194) duplicated as toMutableFileTree (ui-renderer.ts:80-89)\n- flattenFileTree duplicated in file-tree.ts:241-260 and ui-renderer.ts:584-601\n\nConsolidate these into file-tree.ts and export them.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:09.958598666+01:00","updated_at":"2026-02-23T12:55:27.892109524+01:00","closed_at":"2026-02-23T12:55:27.892109524+01:00"}
{"id":"oak-tui-skill-dwv","title":"Add keyboard navigation and selection to themes tab","description":"## Problem\n\nThe themes tab currently only supports mouse interaction. Users cannot navigate or select themes using the keyboard, which is inconsistent with the other tabs (projects, board, files) that all support full keyboard navigation.\n\n## Current Behavior\n\n**Themes Tab:**\n- ‚ùå No keyboard navigation (j/k, arrow keys)\n- ‚ùå No keyboard selection (space/enter)\n- ‚úÖ Mouse-only: Click on theme to apply\n- ‚ùå No visual selection highlighting for keyboard\n- Location: `scripts/lib/ui-renderer.ts` - `renderThemes()` (lines 696-742)\n\n**Other Tabs (for comparison):**\n- ‚úÖ Projects: Full keyboard navigation (j/k, h/l, space/enter, /)\n- ‚úÖ Board: Full keyboard navigation (j/k, h/l, space/enter, /)\n- ‚úÖ Files: Full keyboard navigation (j/k, h/l, space/enter, /)\n\n## Proposed Solution\n\nAdd keyboard navigation to the themes tab following the **exact same pattern** used by other tabs (DRY principle).\n\n### Required Keys\n\n- `j` / `‚Üì` - Move selection down\n- `k` / `‚Üë` - Move selection up\n- `space` / `enter` - Apply selected theme\n- Visual highlighting with gray background (`#3a3a3a`) for keyboard selection\n\n### Common Navigation Pattern (DRY)\n\nAll three existing tabs follow this pattern:\n\n1. **State variable** for selection index\n2. **Helper functions** for count and get-at-index\n3. **Keyboard handler** with up/down/select logic\n4. **Rendering** with `selectedIndex` parameter and background highlighting\n5. **Reset index** when switching tabs\n\n## Implementation Details\n\n### Files to Modify\n\n#### 1. **scripts/worktree-tui.ts**\n\n**Add state variable** (around line 308):\n```typescript\nlet themesSelectedIndex = 0;  // Track keyboard selection for themes\n```\n\n**Add keyboard handler** (around line 1323, after files tab handler):\n```typescript\n} else if (activeTab === \"themes\") {\n  const themes = availableThemes();\n  const totalItems = themes.length;\n  \n  if (keyName === \"up\" || keyName === \"k\") {\n    themesSelectedIndex = Math.max(0, themesSelectedIndex - 1);\n    updateContent();\n  } else if (keyName === \"down\" || keyName === \"j\") {\n    themesSelectedIndex = Math.min(totalItems - 1, themesSelectedIndex + 1);\n    updateContent();\n  } else if (keyName === \"return\" || keyName === \"space\") {\n    const theme = themes[themesSelectedIndex];\n    if (theme) {\n      setTheme(theme.name);\n      updateUIColors(ui);\n      setTimeout(() =\u003e {\n        updateContent();\n      }, 0);\n    }\n  }\n}\n```\n\n**Update renderThemes() call** (around line 731):\n```typescript\nrenderThemes(\n  renderer,\n  ui.contentScroll,\n  availableThemes(),\n  currentTheme().name,\n  renderCounter,\n  (themeName: string) =\u003e {\n    setTheme(themeName);\n    updateUIColors(ui);\n    setTimeout(() =\u003e {\n      updateContent();\n    }, 0);\n  },\n  themesSelectedIndex,  // ‚Üê ADD THIS\n);\n```\n\n**Reset index on tab switch** (lines 776, 800, 820, 833):\n```typescript\n// Add to each tab switch location:\nthemesSelectedIndex = 0;\n```\n\n#### 2. **scripts/lib/ui-renderer.ts**\n\n**Update renderThemes() signature** (line 696):\n```typescript\nexport function renderThemes(\n  renderer: CliRenderer,\n  contentScroll: ScrollBoxRenderable,\n  themes: readonly Theme[],\n  currentThemeName: string,\n  renderCounter: number,\n  onSelectTheme: (themeName: string) =\u003e void,\n  selectedIndex: number = -1,  // ‚Üê ADD THIS\n): void {\n```\n\n**Add selection highlighting** (in the loop, around line 704):\n```typescript\nfor (let i = 0; i \u003c themes.length; i++) {\n  const theme = themes[i];\n  const isActiveTheme = theme.name === currentThemeName;\n  const isKeyboardSelected = i === selectedIndex;  // ‚Üê ADD THIS\n  \n  const themeBox = new BoxRenderable(renderer, {\n    id: `theme-${renderCounter}-${i}`,\n    width: \"100%\",\n    flexDirection: \"row\",\n    gap: 2,\n    paddingBottom: 1,\n    backgroundColor: isKeyboardSelected ? \"#3a3a3a\" : undefined,  // ‚Üê ADD THIS\n    onMouseOver: () =\u003e {  // ‚Üê ADD THIS\n      if (!isKeyboardSelected) {\n        themeBox.backgroundColor = \"#3a3a3a\";\n        void Promise.resolve().then(() =\u003e {\n          renderer.requestRender();\n        });\n      }\n    },\n    onMouseOut: () =\u003e {  // ‚Üê ADD THIS\n      if (!isKeyboardSelected) {\n        themeBox.backgroundColor = undefined;\n        void Promise.resolve().then(() =\u003e {\n          renderer.requestRender();\n        });\n      }\n    },\n  });\n  // ... rest of rendering\n}\n```\n\n**Optional: Add helper functions** (for consistency with other tabs):\n```typescript\nexport function getThemesCount(themes: readonly Theme[]): number {\n  return themes.length;\n}\n\nexport function getThemeAtIndex(\n  themes: readonly Theme[],\n  index: number,\n): Theme | null {\n  return themes[index] ?? null;\n}\n```\n\n#### 3. **scripts/lib/footer.ts**\n\n**Add themes-specific hints** (around line 171):\n```typescript\nelse {\n  if (activeTab === \"projects\") {\n    hints = [...];\n  } else if (activeTab === \"themes\") {\n    hints = [\n      { key: \"‚Üπ\", label: \": cycle \" },\n      { key: \"r\", label: \": reload \" },\n      { key: \"‚Üµ\", label: \": apply \" },\n      { key: \"q\", label: \": quit\" },\n    ];\n  } else {\n    hints = [...];\n  }\n}\n```\n\n## Code References\n\n**Current themes rendering:**\n- `scripts/lib/ui-renderer.ts` lines 696-742 - `renderThemes()`\n- `scripts/worktree-tui.ts` lines 731-744 - `renderThemes()` call\n- No keyboard handler exists for themes tab\n\n**Pattern examples to follow:**\n- Board tab keyboard handler: `worktree-tui.ts` lines 1069-1169\n- Files tab keyboard handler: `worktree-tui.ts` lines 1171-1324\n- Board tab rendering: `ui-renderer.ts` lines 757-905 (see line 802 for selection check, line 810 for backgroundColor)\n- Files tab rendering: `ui-renderer.ts` lines 603-684 (see line 634 for selection check, line 646 for backgroundColor)\n\n**Theme data:**\n- `scripts/lib/types.ts` lines 3-27 - `Theme` interface\n- `scripts/lib/theme-manager.ts` - `availableThemes()`, `setTheme()`, `currentTheme()`\n- Currently 7 themes available\n\n## Testing Checklist\n\n- [ ] `j`/`k` navigation works correctly\n- [ ] `up`/`down` arrow keys work\n- [ ] Selection stays at bounds (0 to themes.length - 1)\n- [ ] `space` or `enter` applies the selected theme\n- [ ] Background highlighting shows keyboard selection\n- [ ] Mouse hover still works alongside keyboard selection\n- [ ] Mouse click still works to apply theme\n- [ ] Selection resets to 0 when switching tabs\n- [ ] Footer shows correct hints for themes tab\n- [ ] Theme switch updates UI colors immediately\n- [ ] Active theme indicator (‚óè) still shows correctly\n- [ ] No crashes when switching rapidly\n\n## Benefits\n\n- Consistent keyboard navigation across all tabs\n- Better user experience for keyboard-first users\n- Follows DRY principle by reusing existing patterns\n- No breaking changes to mouse interaction\n\n## Related Issues\n\nThis follows the same navigation pattern as:\n- Projects tab (worktree-tui.ts lines 893-1067)\n- Board tab (worktree-tui.ts lines 1069-1169)\n- Files tab (worktree-tui.ts lines 1171-1324)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-23T10:42:12.388606618+01:00","updated_at":"2026-02-23T12:30:46.404570751+01:00","closed_at":"2026-02-23T12:30:46.404570751+01:00"}
{"id":"oak-tui-skill-dzs","title":"Add auto-refresh for projects list to detect new worktrees","description":"## Problem\n\nThe projects list in oak-tui does not automatically update when new worktrees are created or removed. Users must manually restart oak or trigger a reload to see newly created worktrees appear in the project list.\n\n## Current Behavior\n\n- Projects tab shows worktrees only at startup\n- When a user creates a new worktree (e.g., via `git worktree add` in another terminal), it doesn't appear in oak-tui until restart\n- Similarly, removed/pruned worktrees continue to show until restart\n\n## Desired Behavior\n\n- Projects list should automatically refresh every few seconds (similar to Board tab)\n- New worktrees should appear automatically without manual intervention\n- Removed worktrees should disappear automatically\n- Refresh should preserve user's current selection and scroll position\n\n## Existing Pattern to Follow\n\nThe Board tab already implements auto-refresh (worktree-tui.ts lines 508-540):\n\n```typescript\n// Board tab auto-refresh pattern\nboardRefreshInterval = setInterval(async () =\u003e {\n  if (state.popupVisible) return; // Skip if popup open\n  \n  const issues = await fetchAndGroupIssues();\n  const filtered = filterIssues(issues, state.boardSearchQuery);\n  \n  clearContent(contentScroll);\n  renderCounter++;\n  renderBoard(renderer, contentScroll, filtered, state, onUpdate);\n  renderer.requestRender();\n}, 5000); // Every 5 seconds\n```\n\nThe interval is cleared when switching tabs in `updateContent()`.\n\n## Implementation Approach\n\n1. Add `projectsRefreshInterval` variable (similar to `boardRefreshInterval`)\n2. In Projects tab rendering (lines 407-427), set up interval:\n   - Call `buildProjectNodes(recentProjects, gitRoot)` to fetch fresh worktrees\n   - Preserve `selectedIndex` and scroll position\n   - Clear content and re-render with updated project nodes\n   - Skip refresh if popup is visible\n3. Clear interval when switching away from Projects tab (in `updateContent()`)\n4. Use same 5-second interval as Board tab for consistency\n\n## Technical Details\n\n- `buildProjectNodes()` already calls `getWorktrees()` which executes `git worktree list --porcelain` fresh each time\n- No caching involved - always gets latest worktrees from git\n- Need to preserve user state: selectedIndex, expandedPaths, searchQuery\n- Should skip refresh if popup is visible (same as Board tab)\n\n## Files to Modify\n\n- `scripts/worktree-tui.ts`:\n  - Add `projectsRefreshInterval` variable\n  - Add auto-refresh logic in Projects tab rendering\n  - Clear interval in `updateContent()` when switching tabs\n\n## Acceptance Criteria\n\n- [ ] Projects list refreshes every 5 seconds when Projects tab is active\n- [ ] New worktrees appear automatically without restart\n- [ ] Removed worktrees disappear automatically\n- [ ] User's selection and scroll position are preserved during refresh\n- [ ] Refresh is skipped when popup is visible\n- [ ] Interval is cleared when switching to other tabs\n- [ ] No performance degradation or flickering during refresh","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-17T17:04:52.691751123+01:00","updated_at":"2026-02-23T13:05:05.588604816+01:00","deleted_at":"2026-02-23T13:05:05.588604816+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-e1x","title":"Add --restart flag to launch.sh for fast TUI restart","description":"## Problem\n\nCurrently, restarting the TUI requires killing and starting it again, which is slow. The launch script always kills existing processes before launching (lines 100-105), making the restart cycle unnecessarily long.\n\n## Proposed Solution\n\nAdd a `--restart` flag to launch.sh that:\n1. Sends a graceful restart signal to the running TUI process\n2. Waits for it to exit with code 42 (reload exit code)\n3. Automatically relaunches with the same flags (--dev, --debug, etc.)\n\n## Implementation Approach\n\n### Option 1: Socket-based restart (Recommended)\n- Add new 'restart' command to socket protocol (alongside existing 'reload')\n- TUI receives restart command and exits with code 42\n- Launch script wraps TUI in a restart loop that monitors exit code 42\n- Preserves all flags (--dev, --debug) across restarts\n\n### Option 2: Signal-based restart\n- Send SIGUSR1 to TUI process to trigger graceful exit with code 42\n- Launch script monitors exit code and restarts if 42\n- Simpler but less flexible than socket approach\n\n## Technical Details\n\n**Existing Infrastructure:**\n- Exit code 42 already used for reload scenarios (worktree-tui.ts lines 180-210)\n- Socket server exists with reload command support (socket-manager.ts)\n- sendReloadCommand() function available but unused\n- Socket path: ~/.local/share/oak-tui/tui.sock\n\n**Changes Needed:**\n1. launch.sh:\n   - Add --restart flag parsing\n   - Implement restart loop: `while true; do bun run ...; [ $? -eq 42 ] || break; done`\n   - Send restart command via socket instead of kill+start\n   - Preserve MODE and DEBUG_FLAG across restarts\n\n2. socket-manager.ts:\n   - Add 'restart' command handler\n   - Export sendRestartCommand() function\n\n3. worktree-tui.ts:\n   - Handle restart command from socket\n   - Exit with code 42 for restart\n\n## Benefits\n- Much faster than kill+start (no tmux pane recreation)\n- Preserves tmux layout and pane state\n- Works with --dev and --debug flags\n- Graceful shutdown vs force kill\n\n## Testing\n- Test `launch.sh --restart`\n- Test `launch.sh --restart --dev`\n- Test `launch.sh --restart --debug`\n- Test `launch.sh --restart --dev --debug`\n- Verify exit code 42 triggers automatic restart\n- Verify other exit codes (0, 1, 100) don't restart","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-23T10:57:04.245160775+01:00","updated_at":"2026-02-23T13:03:00.150306044+01:00","closed_at":"2026-02-23T13:03:00.150306044+01:00"}
{"id":"oak-tui-skill-eat","title":"Fix duplicate projects when starting oak from worktree directory","description":"## Problem\n\nWhen oak-tui is launched from a git worktree directory, the projects list shows duplicate entries for the same repository - one for the main repo and one for the worktree path.\n\n## Real-World Example\n\nCurrent `~/.local/share/oak-tui/recent-projects.json` shows:\n- `/home/linux-falko/Dev/hub+EN-4960` (worktree)\n- `/home/linux-falko/Dev/hub` (main repo)\n\nThese are the same repository appearing twice in the projects list.\n\nVerification:\n```bash\n$ cat /home/linux-falko/Dev/hub+EN-4960/.git\ngitdir: /home/linux-falko/Dev/hub/.git/worktrees/hub+EN-4960\n\n$ cd /home/linux-falko/Dev/hub \u0026\u0026 git worktree list\n/home/linux-falko/Dev/hub                     e41bfc9f [main-branch]\n/home/linux-falko/Dev/hub+EN-4960             86aae9fc [hub+EN-4960]\n```\n\n## Root Cause\n\nIn `worktree-tui.ts` (lines 200-236), the startup flow:\n1. Gets `gitRoot = getGitRoot(startDir)` which uses `git rev-parse --show-toplevel`\n2. Calls `saveRecentProject(gitRoot)` to save to recent projects\n\nThe issue: `git rev-parse --show-toplevel` returns the worktree path when run from a worktree (e.g., `/home/linux-falko/Dev/hub+EN-4960`), not the main repo path (e.g., `/home/linux-falko/Dev/hub`). This causes the worktree path to be saved as a separate project entry.\n\n## Solution\n\nDetect if the current directory is a worktree and resolve to the main repo path before saving:\n\n1. Check if `.git` is a file (worktrees have `gitdir: /path/to/main/.git/worktrees/name`)\n2. Use `git rev-parse --git-common-dir` to get the main repo's .git directory\n3. Resolve to parent directory to get main repo path\n4. Use main repo path for `saveRecentProject()`\n\n## Technical Details\n\nFrom worktree:\n- `git rev-parse --show-toplevel` ‚Üí `/home/linux-falko/Dev/hub+EN-4960` (worktree path)\n- `git rev-parse --git-common-dir` ‚Üí `/home/linux-falko/Dev/hub/.git` (main repo .git)\n- Main repo path: `realpath $(git rev-parse --git-common-dir)/..` ‚Üí `/home/linux-falko/Dev/hub`\n\nFrom main repo:\n- `git rev-parse --show-toplevel` ‚Üí `/home/linux-falko/Dev/hub`\n- `git rev-parse --git-common-dir` ‚Üí `.git`\n\n## Files to Modify\n\n- `scripts/lib/project-manager.ts`: Add `getMainRepoPath()` function\n- `scripts/worktree-tui.ts`: Use `getMainRepoPath()` instead of `getGitRoot()` for saving recent projects\n\n## Acceptance Criteria\n\n- When oak-tui is launched from a worktree directory, only the main repo path is saved to recent-projects.json\n- Existing duplicate entries in recent-projects.json should be cleaned up (deduplicated)\n- The projects list should show each repository only once, regardless of whether oak was launched from main repo or worktree","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T16:47:43.407922091+01:00","updated_at":"2026-02-23T13:05:05.594133876+01:00","deleted_at":"2026-02-23T13:05:05.594133876+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-etd","title":"Wire up Beads tab in worktree-tui.ts","description":"## Summary\nIntegrate the Beads tab into the main TUI application.\n\n## File Location\n`scripts/worktree-tui.ts`\n\n## Changes Required\n\n### 1. Add to TABS array (lines 158-162)\n```typescript\nconst TABS: { id: TabId; label: string }[] = [\n  { id: \"projects\", label: \"Projects\" },\n  { id: \"files\", label: \"Files\" },\n  { id: \"themes\", label: \"Themes\" },\n  { id: \"beads\", label: \"Beads\" },  // NEW\n];\n```\n\n### 2. Add state variables\n```typescript\nlet beadsIssues: GroupedIssues = { blocked: [], ready: [], in_progress: [], closed: [] };\n```\n\n### 3. Add to updateContent() function\n```typescript\n} else if (activeTab === \"beads\") {\n  // Fetch fresh data\n  beadsIssues = fetchAndGroupIssues();\n  renderBeads(\n    renderer,\n    ui.contentScroll,\n    beadsIssues,\n    renderCounter,\n    selectedIndex,\n    (issue) =\u003e {\n      // Handle issue selection (show details or open)\n    },\n  );\n}\n```\n\n### 4. Add keyboard handling\n```typescript\n} else if (activeTab === \"beads\") {\n  const totalItems = getTotalBeadsCount(beadsIssues);\n  \n  if (keyName === \"up\" || keyName === \"k\") {\n    selectedIndex = Math.max(0, selectedIndex - 1);\n    updateContent();\n  } else if (keyName === \"down\" || keyName === \"j\") {\n    selectedIndex = Math.min(totalItems - 1, selectedIndex + 1);\n    updateContent();\n  } else if (keyName === \"return\" || keyName === \"space\") {\n    // Open issue details or trigger action\n    const issue = getIssueAtIndex(beadsIssues, selectedIndex);\n    if (issue) {\n      // Show details or open in editor\n    }\n  } else if (keyName === \"r\") {\n    // Refresh issues\n    updateContent();\n  }\n}\n```\n\n### 5. Add imports\n```typescript\nimport { fetchAndGroupIssues, getIssueAtIndex, getTotalBeadsCount } from \"./lib/beads-manager\";\nimport { renderBeads } from \"./lib/ui-renderer\";\nimport type { GroupedIssues } from \"./lib/types\";\n```\n\n## Parent Issue\nThis is part of: Add Beads issues tab to Oak TUI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-16T15:37:54.238032901+01:00","updated_at":"2026-02-16T15:43:28.48872891+01:00","closed_at":"2026-02-16T15:43:28.48872891+01:00","dependencies":[{"issue_id":"oak-tui-skill-etd","depends_on_id":"oak-tui-skill-3e5","type":"blocks","created_at":"2026-02-16T15:37:58.802627308+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"oak-tui-skill-etd","depends_on_id":"oak-tui-skill-3cq","type":"blocks","created_at":"2026-02-16T15:37:58.834117399+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"oak-tui-skill-gpy","title":"Allow multiple background panes per worktree","status":"closed","priority":2,"issue_type":"feature","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-25T12:45:35.097000459+01:00","created_by":"select","updated_at":"2026-02-25T12:47:53.672329228+01:00","closed_at":"2026-02-25T12:47:53.672329228+01:00","close_reason":"Closed"}
{"id":"oak-tui-skill-grt","title":"Footer not updating when switching tabs with Ctrl+Left/Right","description":"## Problem\n\nWhen switching tabs using Ctrl+Left or Ctrl+Right arrow keys, the footer hints do not update to reflect the current tab's available actions. The footer shows stale hints from the previous tab.\n\n**Example:**\n1. Start on Projects tab (footer shows: `d: remove`)\n2. Press Ctrl+Right to switch to Board tab\n3. Footer still shows `d: remove` instead of `q: quit`\n\n## Root Cause\n\nIn `scripts/worktree-tui.ts`, the Ctrl+Left and Ctrl+Right handlers call `updateContent()` but do NOT call `refreshFooter()`:\n\n- **Ctrl+Left** (line 805-823): Missing `refreshFooter()` call ‚ùå\n- **Ctrl+Right** (line 824-836): Missing `refreshFooter()` call ‚ùå\n\nMeanwhile, other tab switching methods correctly call both:\n- **Number keys 1-4** (line 768-782): Calls `refreshFooter()` ‚úÖ\n- **Tab key** (line 794-804): Calls `refreshFooter()` ‚úÖ\n- **Shift+Tab** (line 783-793): Calls `refreshFooter()` ‚úÖ\n\n## Code Duplication Issue (DRY Violation)\n\nAll 5 tab switching handlers have duplicated logic:\n1. Find current tab index in TABS array\n2. Calculate next/prev index with wrapping\n3. Set `activeTab = TABS[index].id`\n4. Call `saveUIState({ activeTab })`\n5. Reset `selectedIndex = 0`\n6. Call `updateContent()`\n7. Some call `refreshFooter()`, some don't (inconsistent)\n\nThis duplication makes it easy to miss updates (like the missing `refreshFooter()` calls) and violates DRY principles.\n\n## Proposed Solution\n\n### 1. Extract tab switching logic into a reusable function\n\nCreate a `switchToTab(tabId: TabId)` function that:\n- Sets `activeTab = tabId`\n- Calls `saveUIState({ activeTab })`\n- Resets `selectedIndex = 0`\n- Calls `updateContent()`\n- Calls `refreshFooter()`\n- Calls `renderer.requestRender()`\n\n### 2. Replace all 5 tab switching handlers to use the new function\n\n- Number keys (1-4): Call `switchToTab(TABS[index].id)`\n- Tab: Call `switchToTab(nextTab)`\n- Shift+Tab: Call `switchToTab(prevTab)`\n- Ctrl+Right: Call `switchToTab(nextTab)`\n- Ctrl+Left: Call `switchToTab(prevTab)`\n\n## Benefits\n\n- **Fixes the bug**: Footer will update consistently for all tab switching methods\n- **DRY code**: Single source of truth for tab switching logic\n- **Maintainability**: Future changes only need to be made in one place\n- **Consistency**: All tab switches behave identically\n\n## Testing\n\n1. Start on Projects tab (footer shows `d: remove`)\n2. Test each navigation method and verify footer updates:\n   - Press `2` ‚Üí Board tab, footer shows `q: quit` ‚úÖ\n   - Press `1` ‚Üí Projects tab, footer shows `d: remove` ‚úÖ\n   - Press Tab ‚Üí Board tab, footer shows `q: quit` ‚úÖ\n   - Press Shift+Tab ‚Üí Projects tab, footer shows `d: remove` ‚úÖ\n   - Press Ctrl+Right ‚Üí Board tab, footer shows `q: quit` ‚úÖ\n   - Press Ctrl+Left ‚Üí Projects tab, footer shows `d: remove` ‚úÖ\n3. Test with search active (footer should show search hints)\n4. Test with confirm delete popup (footer should show delete hints)\n\n## Files to Modify\n\n- `scripts/worktree-tui.ts`: Extract `switchToTab()` function and update all 5 handlers","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-23T11:01:26.68112805+01:00","updated_at":"2026-02-23T11:33:10.361343774+01:00","closed_at":"2026-02-23T11:33:10.361343774+01:00"}
{"id":"oak-tui-skill-h8w","title":"Board tab must show issues for currently active worktree project","description":"## Problem\n\nWhen switching worktrees in the Projects tab, the Board tab continues to show issues from the previously active project instead of updating to show issues for the newly selected worktree's project.\n\n## Current Behavior\n\n1. User launches oak-tui from project A\n2. Board tab shows issues for project A\n3. User switches to Projects tab and selects a worktree from project B\n4. `switchToWorktree()` changes the tmux pane to project B's directory\n5. User switches to Board tab\n6. Board still shows issues for project A (incorrect)\n\n## Root Cause\n\n**Issue 1: Board doesn't know about worktree switches**\n- When user selects a worktree (worktree-tui.ts lines 755-772), it calls `switchToWorktree()`\n- `switchToWorktree()` changes the tmux pane but doesn't trigger any board refresh\n- Board continues showing cached issues from previous project\n\n**Issue 2: Board fetches from wrong directory**\n- `fetchAndGroupIssues()` in beads-manager.ts executes `bd list --json`\n- This command runs in oak-tui's current working directory (startup directory)\n- It does NOT run in the active worktree's directory\n- Even if board refreshed, it would fetch issues from wrong project\n\n## Desired Behavior\n\n1. When user switches worktrees in Projects tab, track the new active worktree path\n2. When Board tab is displayed, fetch issues from the active worktree's directory\n3. Board auto-refresh should continue to fetch from active worktree's directory\n4. Board should immediately refresh when switching back to Board tab after worktree change\n\n## Technical Details\n\n**Current state tracking:**\n- `gitRoot` variable (line 228) tracks the directory oak-tui was launched from\n- This is used for file tree and recent projects\n- No variable tracks the \"currently active worktree for board purposes\"\n\n**fetchAndGroupIssues() needs modification:**\n- Currently: `execSync('bd list --json')` runs in process cwd\n- Needed: `execSync('bd list --json', { cwd: activeWorktreePath })`\n- Must pass the active worktree path as parameter\n\n**Worktree switch detection:**\n- After `switchToWorktree(wt.path, node.path)` call (line 768)\n- Need to update `activeWorktreePath` state variable\n- Trigger immediate board refresh if Board tab is active\n\n## Implementation Approach\n\n1. **Add state variable:**\n   - Add `let activeWorktreePath = gitRoot` (initialized to startup directory)\n   - Update when worktree is switched: `activeWorktreePath = wt.path`\n\n2. **Modify fetchAndGroupIssues():**\n   - Add parameter: `fetchAndGroupIssues(workingDir: string)`\n   - Use `execSync('bd list --json', { cwd: workingDir })`\n   - All callers pass `activeWorktreePath`\n\n3. **Trigger refresh on worktree switch:**\n   - After `switchToWorktree()` call, update `activeWorktreePath`\n   - If Board tab is active, immediately call board refresh logic\n   - If Board tab is inactive, refresh will happen when user switches to it\n\n4. **Update board auto-refresh:**\n   - Ensure `boardRefreshInterval` uses `activeWorktreePath`\n   - Pass to `fetchAndGroupIssues(activeWorktreePath)`\n\n## Files to Modify\n\n- `scripts/worktree-tui.ts`:\n  - Add `activeWorktreePath` state variable\n  - Update after worktree switch (line 768)\n  - Trigger board refresh on switch\n  - Pass `activeWorktreePath` to all `fetchAndGroupIssues()` calls\n\n- `scripts/lib/beads-manager.ts`:\n  - Add `workingDir` parameter to `fetchAndGroupIssues()`\n  - Use `{ cwd: workingDir }` option in execSync\n\n## Acceptance Criteria\n\n- [ ] When switching worktrees in Projects tab, Board shows issues for the new worktree's project\n- [ ] Board auto-refresh continues to fetch from active worktree's directory\n- [ ] Switching back to Board tab after worktree change shows correct issues immediately\n- [ ] Initial board load shows issues from startup directory (current behavior preserved)\n- [ ] No errors when switching between worktrees of different projects","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T17:05:45.207767298+01:00","updated_at":"2026-02-23T13:05:05.584281392+01:00","deleted_at":"2026-02-23T13:05:05.584281392+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-ht7","title":"Fix tsgolint errors in ui-renderer.ts","description":"## File: scripts/lib/ui-renderer.ts (56 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to array/object params\n- strict-boolean-expressions: Handle nullable values explicitly\n\n### Key locations:\n- Line 26: projectNodes param\n- Line 39: projectNodes param\n- Line 66-68: fileTree and expandedPaths params\n- Line 79-81: fileTree and expandedPaths params\n- Line 88: flatFiles[index] truthy check\n- Line 93: projectNodes param\n- Line 103, 122: result param in map callbacks\n- Line 111, 115: grouped and issues params\n- Line 154: renderer param","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:14.221651774+01:00","updated_at":"2026-02-23T13:05:05.616668919+01:00","deleted_at":"2026-02-23T13:05:05.616668919+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-iet","title":"Show board issue details in popup with markdown rendering on Enter","description":"## Problem\n\nWhen pressing Enter on a board issue, nothing happens (just a debug log). Users need to see issue details without leaving the TUI.\n\n### Current State\n- Enter/Space on board issue only logs to debug: `debug(\"Activated issue:\", result.issue.id)`\n- Comment in code: `// TODO: Show issue details`\n- No popup/modal system exists in the codebase\n\n## Desired Behavior\n\nWhen pressing Enter on a board issue:\n1. Show a popup/modal overlay with the full issue details\n2. Render the issue description with **markdown highlighting**\n3. Press Escape to close the popup and return to board navigation\n\n### Popup Content\n- **Header**: Issue ID and title\n- **Metadata bar**: Status badge, priority, type, assignee\n- **Description**: Full markdown content with syntax highlighting\n- **Footer**: Timestamps (created, updated), dependency counts\n\n## Implementation Notes\n\n### OpenTUI has built-in MarkdownRenderable!\n\n`@opentui/core` includes `MarkdownRenderable` for markdown rendering:\n\n```typescript\nimport { MarkdownRenderable } from \"@opentui/core\"\n// Note: May need to import from \"@opentui/core/renderables/Markdown\"\n\nconst md = new MarkdownRenderable(renderer, {\n  id: \"issue-description\",\n  content: issue.description,\n  syntaxStyle: mySyntaxStyle,  // Required - for code block highlighting\n  conceal: true,               // Hide formatting markers (**, ##, etc.)\n  treeSitterClient?: client,   // Optional - for advanced syntax highlighting\n})\n```\n\n### MarkdownOptions interface:\n- `content: string` - Markdown text to render\n- `syntaxStyle: SyntaxStyle` - Required for code syntax highlighting\n- `conceal?: boolean` - Hide markdown formatting markers\n- `treeSitterClient?: TreeSitterClient` - Optional tree-sitter for code blocks\n- `streaming?: boolean` - For incremental updates\n\n### SyntaxStyle setup:\n```typescript\nimport { SyntaxStyle } from \"@opentui/core\"\n\n// Create from scratch\nconst syntaxStyle = SyntaxStyle.create()\nsyntaxStyle.setStyle(\"keyword\", { fg: parseColor(\"#fab283\"), bold: true })\nsyntaxStyle.setStyle(\"string\", { fg: parseColor(\"#7fd88f\") })\n// ... more styles\n\n// Or from theme\nconst syntaxStyle = SyntaxStyle.fromTheme(themeTokenStyles)\n```\n\n### Popup implementation using OpenTUI primitives:\n\n```typescript\n// Create modal overlay (add to renderer.root for overlay effect)\nconst modalOverlay = new BoxRenderable(renderer, {\n  id: \"modal-overlay\",\n  position: \"absolute\",\n  top: 0, left: 0,\n  width: \"100%\", height: \"100%\",\n  backgroundColor: \"rgba(0,0,0,0.5)\",  // Semi-transparent backdrop\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  zIndex: 100,\n})\n\n// Modal content box\nconst modalBox = new BoxRenderable(renderer, {\n  id: \"modal-content\",\n  width: \"80%\", height: \"80%\",\n  backgroundColor: \"#141414\",\n  border: true,\n  borderStyle: \"rounded\",\n  borderColor: \"#fab283\",\n  title: `${issue.id}: ${issue.title}`,\n  padding: 1,\n  flexDirection: \"column\",\n})\n\n// Scrollable content for long descriptions\nconst modalScroll = new ScrollBoxRenderable(renderer, {\n  id: \"modal-scroll\",\n  width: \"100%\",\n  flexGrow: 1,\n  scrollY: true,\n})\n\n// Markdown rendered description\nconst descriptionMd = new MarkdownRenderable(renderer, {\n  id: \"issue-description\",\n  content: issue.description || \"No description\",\n  syntaxStyle: syntaxStyle,\n  conceal: true,\n})\n\nmodalScroll.add(descriptionMd)\nmodalBox.add(modalScroll)\nmodalOverlay.add(modalBox)\nrenderer.root.add(modalOverlay)\n```\n\n### State changes needed:\n- `showIssuePopup: boolean` - Whether popup is visible\n- `selectedIssueForPopup: BeadsIssue | null` - Issue to display\n\n### Keyboard handling:\n- **Enter** on board issue ‚Üí `showIssuePopup = true`, fetch full issue details\n- **Escape** when popup shown ‚Üí `showIssuePopup = false`, remove overlay\n- **j/k or arrows** in popup ‚Üí scroll the description\n\n### Fetching full issue data:\nThe `BeadsIssue` from board may have truncated description. Use:\n```bash\nbd show \u003cissue-id\u003e --json\n```\nTo get full description content.\n\n### Files to modify:\n- `scripts/worktree-tui.ts` - Add popup state, keyboard handling, overlay rendering\n- `scripts/lib/ui-renderer.ts` - Add `renderIssuePopup()` function\n- `scripts/lib/types.ts` - Add popup-related types if needed\n\n### Key code locations:\n- Board Enter handler: worktree-tui.ts:521-525\n- Board rendering: ui-renderer.ts:601-731\n- BeadsIssue type: types.ts:62-75","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T22:04:20.907553862+01:00","updated_at":"2026-02-16T22:59:25.612247445+01:00","closed_at":"2026-02-16T22:59:25.612247445+01:00"}
{"id":"oak-tui-skill-ifq","title":"Board tab: Add borders around sections and remove badge brackets","description":"## Summary\nImprove the Board tab visual design by:\n1. Adding a border around each section (Blocked, Ready, In Progress, Closed)\n2. Removing square brackets from type and priority badges\n\n## Current Behavior\n- Sections use text-based headers: `‚ïê‚ïê Blocked (3) ‚ïê‚ïê`\n- Badges display with brackets: `[Task] [Medium]`\n\n## Desired Behavior\n- Each section wrapped in a bordered box\n- Badges display without brackets: `Task Medium`\n\n## Implementation Details\n\n### 1. Add borders around sections\n\nFile: `scripts/lib/ui-renderer.ts` in `renderBoard()` function\n\nCurrently each section just adds items directly to contentScroll. Need to:\n1. Create a container BoxRenderable for each section with border\n2. Add the header and issues inside this container\n\n```typescript\n// Create section container with border\nconst sectionBox = new BoxRenderable(renderer, {\n  id: `board-section-${section.key}-${renderCounter}`,\n  width: \"100%\",\n  flexDirection: \"column\",\n  border: true,\n  borderStyle: \"rounded\",  // or \"single\", \"double\", \"heavy\"\n  borderColor: currentTheme().colors.border,\n  marginBottom: 1,  // Space between sections\n  padding: 1,       // Inner padding\n});\n\n// Add header to section\nsectionBox.add(headerText);\n\n// Add issues to section\nissues.forEach((issue) =\u003e {\n  sectionBox.add(issueCard);\n});\n\n// Add section to scroll\ncontentScroll.add(sectionBox);\n```\n\n### 2. Remove square brackets from badges\n\nFile: `scripts/lib/ui-renderer.ts` lines 657-668\n\nChange:\n```typescript\n// Type badge - line ~660\ncontent: `[${capitalize(issue.issue_type)}]`,\n// To:\ncontent: capitalize(issue.issue_type),\n\n// Priority badge - line ~667\ncontent: `[${getPriorityLabel(issue.priority)}]`,\n// To:\ncontent: getPriorityLabel(issue.priority),\n```\n\n### BoxRenderable Border Options Available\nFrom @opentui/core:\n- `border: true` - Enable border on all sides\n- `border: [\"top\", \"bottom\"]` - Specific sides only\n- `borderStyle: \"single\" | \"double\" | \"rounded\" | \"heavy\"`\n- `borderColor: string` - Color from theme\n- `title: string` - Optional title in border (could use for section name)\n- `titleAlignment: \"left\" | \"center\" | \"right\"`\n\n### Theme Colors Available\n- `currentTheme().colors.border` - Default border color (#484848)\n- `currentTheme().colors.borderFocused` - Focused border color (#fab283)\n\n## Visual Mockup\n```\n‚ï≠‚îÄ Blocked (3) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\n‚îÇ Task Medium oak-tui-skill-etd‚îÇ\n‚îÇ   Wire up Beads tab in...    ‚îÇ\n‚îÇ Task Medium oak-tui-skill-3cq‚îÇ\n‚îÇ   Create renderBeads() UI... ‚îÇ\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ\n\n‚ï≠‚îÄ Ready (2) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\n‚îÇ Feature Medium oak-tui-skil..‚îÇ\n‚îÇ   Add Beads issues tab to... ‚îÇ\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ\n```\n\n## Files to Modify\n- `scripts/lib/ui-renderer.ts` - renderBoard() function (lines 588-712)\n\n## Acceptance Criteria\n- [ ] Each section (Blocked, Ready, In Progress, Closed) has a visible border\n- [ ] Section name appears in or near the border\n- [ ] Badges show without square brackets (e.g., `Task` not `[Task]`)\n- [ ] Proper spacing between sections\n- [ ] Border color follows theme","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T15:46:19.380927246+01:00","updated_at":"2026-02-16T15:55:56.939479864+01:00","closed_at":"2026-02-16T15:55:56.939479864+01:00"}
{"id":"oak-tui-skill-inj","title":"DRY: Share capitalize function and label constants","description":"Duplication between issue-popup.ts and beads-manager.ts:\n- capitalizeFirst (issue-popup.ts:81-82) duplicates capitalize (beads-manager.ts:466-468)\n- PRIORITY_LABELS and STATUS_LABELS in issue-popup.ts could use getPriorityLabel from beads-manager.ts\n\nConsolidate these utilities.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:23.094069835+01:00","updated_at":"2026-02-23T12:58:13.929789258+01:00","closed_at":"2026-02-23T12:58:13.929789258+01:00"}
{"id":"oak-tui-skill-iv6","title":"Add confirmation popup for project deletion","description":"Currently, pressing 'd' on a project in the projects tab deletes it immediately without confirmation. This is dangerous as users might accidentally delete projects. Add a confirmation popup similar to the issue popup.\n\n## Current Behavior\n- Press 'd' on a project header in projects tab\n- Project is immediately removed from recent projects list (worktree-tui.ts:940-963)\n- No confirmation or undo option\n- Footer hint shows 'd:remove' but no warning about immediate deletion\n\n## Desired Behavior\nShow a confirmation popup with:\n- Title: 'Delete Project?'\n- Message: Show project name/path being deleted\n- Options: '[d]elete' and '[c]ancel' (highlighted)\n- Escape key should also cancel\n\n## Implementation Notes\n\n### State Management\nAdd new state variable (similar to issuePopupState):\n- confirmDeleteState: { visible: boolean, projectPath: string | null }\n\n### Popup Component\nCreate new component: scripts/components/confirm-popup.ts\n- Similar structure to issue-popup.ts\n- Simpler layout: title, message, button row\n- Functions: showConfirmPopup(projectPath), hideConfirmPopup(), renderConfirmPopup()\n- Center the popup (smaller than issue popup)\n\n### Keyboard Handling (worktree-tui.ts)\n1. When 'd' pressed on project (line 940):\n   - Don't delete immediately\n   - Set confirmDeleteState.visible = true, confirmDeleteState.projectPath = node.path\n   - Render popup overlay\n   \n2. When popup is visible:\n   - 'd' key: proceed with deletion (call removeRecentProject), hide popup, reload projects\n   - 'c' or Escape: hide popup, no deletion\n   - Block all other keyboard shortcuts while popup visible\n\n### Footer Updates (footer.ts)\n- When confirmDeleteState.visible: show 'd:delete c:cancel Esc:cancel'\n- Normal projects tab: keep existing 'd:remove' hint\n\n### UI Design\nFollow existing popup pattern from issue-popup.ts:\n- Semi-transparent overlay background\n- Centered box with border\n- Use theme colors (error color for delete button highlight)\n- Clear visual hierarchy\n\n### Files to Modify\n- scripts/worktree-tui.ts: state, keyboard handling, render logic\n- scripts/components/confirm-popup.ts: new file for popup component\n- scripts/lib/footer.ts: add footer hints for confirm state\n- scripts/lib/types.ts: add ConfirmDeleteState interface\n\n### Edge Cases\n- If project already deleted by another process, show error message\n- Ensure popup closes on successful deletion\n- Handle window resize while popup is visible","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-20T18:54:28.708753126+01:00","updated_at":"2026-02-23T13:05:05.531815726+01:00","deleted_at":"2026-02-23T13:05:05.531815726+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-kpy","title":"Fix tsgolint errors in theme-manager.ts, beads-manager.ts, search-bar.ts","description":"## Files:\n- scripts/lib/theme-manager.ts (10 errors)\n- scripts/lib/beads-manager.ts (10 errors)\n- scripts/components/search-bar.ts (2 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to params\n- no-unsafe-return/assignment: Type JSON.parse returns\n- strict-boolean-expressions: Handle nullable values\n\n### These are smaller files with fewer errors - good for cleanup","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:22.640535682+01:00","updated_at":"2026-02-23T13:05:05.6038233+01:00","deleted_at":"2026-02-23T13:05:05.6038233+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-llc","title":"Auto-refresh Board tab periodically","description":"## Summary\nAdd automatic periodic refresh to the Board tab so it stays up-to-date without manual intervention.\n\n## Current Behavior\n- Board tab only fetches data when switching to the tab\n- No automatic updates while viewing the board\n- User must switch away and back to see changes\n\n## Desired Behavior\n- Board tab auto-refreshes every N seconds (e.g., 5-10 seconds)\n- Optional: Manual refresh key (e.g., `r`) for immediate refresh\n- Optional: Visual indicator during refresh\n\n## Implementation\n\n### 1. Add refresh interval when Board tab is active\n\nIn `worktree-tui.ts`, set up an interval when switching to board tab:\n\n```typescript\nlet boardRefreshInterval: Timer | null = null;\n\nfunction updateContent() {\n  // Clear any existing interval when switching tabs\n  if (boardRefreshInterval) {\n    clearInterval(boardRefreshInterval);\n    boardRefreshInterval = null;\n  }\n\n  // ... existing tab logic ...\n\n  if (activeTab === \"board\") {\n    boardIssues = fetchAndGroupIssues();\n    renderBoard(...);\n    \n    // Set up auto-refresh every 5 seconds\n    boardRefreshInterval = setInterval(() =\u003e {\n      boardIssues = fetchAndGroupIssues();\n      clearContent(ui.contentScroll);\n      renderCounter++;\n      renderBoard(...);\n      renderer.requestRender();\n    }, 5000);\n  }\n}\n```\n\n### 2. Clean up interval on exit\n\n```typescript\nprocess.on('exit', () =\u003e {\n  if (boardRefreshInterval) {\n    clearInterval(boardRefreshInterval);\n  }\n});\n```\n\n### 3. Optional: Add manual refresh key\n\nIn keyboard handler for board tab:\n```typescript\n} else if (keyName === \"r\") {\n  // Manual refresh\n  boardIssues = fetchAndGroupIssues();\n  updateContent();\n}\n```\n\n### 4. Optional: Add refresh indicator\n\nShow a subtle indicator in the footer or board header when refreshing.\n\n## Configuration Options\n- Refresh interval: 5 seconds (could be configurable)\n- Could add to ui-state.json for persistence\n\n## Files to Modify\n- `scripts/worktree-tui.ts` - Add interval logic and cleanup\n\n## Acceptance Criteria\n- [ ] Board tab auto-refreshes every 5 seconds when active\n- [ ] Refresh stops when switching to another tab\n- [ ] No memory leaks (interval properly cleaned up)\n- [ ] Selection state preserved during refresh\n- [ ] Optional: `r` key for manual refresh","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T15:49:28.018306219+01:00","updated_at":"2026-02-16T15:57:52.010710864+01:00","closed_at":"2026-02-16T15:57:52.010710864+01:00"}
{"id":"oak-tui-skill-n47","title":"Fix strict-boolean-expressions lint warnings","description":"Fix ~51 instances of strict-boolean-expressions warnings across project-state.ts, worktree-tui.ts, and other files. Handle nullable string/boolean/object values explicitly instead of relying on truthiness.","status":"open","priority":2,"issue_type":"task","owner":"1164760+select@users.noreply.github.com","created_at":"2026-02-27T12:43:08.26230988+01:00","created_by":"select","updated_at":"2026-02-27T12:43:08.26230988+01:00"}
{"id":"oak-tui-skill-n6x","title":"Replace board issue type text badges with icon-only colored symbols","description":"## Problem\n\nThe type badges in the board view (\"Feature\", \"Bug\", \"Task\", \"Epic\", \"Chore\") are too prominent and take up visual space. The text is distracting from the issue titles.\n\n### Current State\n\n**Location:** `scripts/lib/ui-renderer.ts` lines 741-747\n\n```typescript\nconst typeBadge = new TextRenderable(renderer, {\n  id: `board-type-${renderCounter}-${flatIndex}`,\n  content: capitalize(issue.issue_type),  // Shows \"Feature\", \"Bug\", etc.\n  fg: getTypeColor(issue.issue_type),\n});\n```\n\n**Current appearance:**\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Feature                    oak-tui-skill-abc ‚ñ≤‚ñ≤ ‚îÇ\n‚îÇ Issue title here...                             ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Current Colors (keep these!)\n\n| Type | Color | Hex |\n|------|-------|-----|\n| feature | Dimmed green | `#5a9a65` |\n| bug | Dimmed red | `#a65050` |\n| task | Dimmed blue | `#4a7ab0` |\n| epic | Dimmed purple | `#8a5a9a` |\n| chore | Dimmed gray | `#606060` |\n\nDefined in `scripts/lib/beads-manager.ts` lines 293-308 (`getTypeColor()`)\n\n## Desired Behavior\n\nReplace text badges with **icon-only** symbols, keeping the same colors:\n\n| Type | Icon | Color |\n|------|------|-------|\n| feature | ‚ú¶ (or ‚òÖ) | `#5a9a65` |\n| bug | ‚óè (or üêõ) | `#a65050` |\n| task | ‚óÜ (or ‚òê) | `#4a7ab0` |\n| epic | ‚óà (or ‚¨°) | `#8a5a9a` |\n| chore | ‚óã (or ‚öô) | `#606060` |\n\n**Desired appearance:**\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ ‚ú¶                          oak-tui-skill-abc ‚ñ≤‚ñ≤ ‚îÇ\n‚îÇ Issue title here...                             ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Implementation Notes\n\n### Add `getTypeIcon()` function\n\nAdd to `scripts/lib/beads-manager.ts` (follow `getPriorityIcon()` pattern at lines 253-268):\n\n```typescript\nexport function getTypeIcon(type: string): string {\n  switch (type) {\n    case \"feature\":\n      return \"‚ú¶\";  // Star/sparkle for new features\n    case \"bug\":\n      return \"‚óè\";  // Filled circle for bugs\n    case \"task\":\n      return \"‚óÜ\";  // Diamond for tasks\n    case \"epic\":\n      return \"‚óà\";  // Double diamond for epics\n    case \"chore\":\n      return \"‚óã\";  // Empty circle for chores\n    default:\n      return \"‚óã\";\n  }\n}\n```\n\n### Update badge rendering\n\nIn `scripts/lib/ui-renderer.ts` lines 741-747, change:\n\n```typescript\n// Before\nconst typeBadge = new TextRenderable(renderer, {\n  id: `board-type-${renderCounter}-${flatIndex}`,\n  content: capitalize(issue.issue_type),\n  fg: getTypeColor(issue.issue_type),\n});\n\n// After\nconst typeBadge = new TextRenderable(renderer, {\n  id: `board-type-${renderCounter}-${flatIndex}`,\n  content: getTypeIcon(issue.issue_type),\n  fg: getTypeColor(issue.issue_type),\n});\n```\n\n### Files to modify:\n- `scripts/lib/beads-manager.ts` - Add `getTypeIcon()` function\n- `scripts/lib/ui-renderer.ts` - Update type badge to use icon instead of text\n\n### Icon alternatives to consider:\n- **feature**: ‚ú¶ ‚òÖ ‚ú® ‚óÜ\n- **bug**: ‚óè üêõ ‚ö† ‚úï\n- **task**: ‚óÜ ‚òê ‚ñ™ ‚ñ†\n- **epic**: ‚óà ‚¨° ‚óâ ‚ö°\n- **chore**: ‚óã ‚öô ‚óå ¬∑","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-16T22:12:33.665547586+01:00","updated_at":"2026-02-16T22:50:26.861939495+01:00","closed_at":"2026-02-16T22:50:26.861939495+01:00"}
{"id":"oak-tui-skill-n7p","title":"Configurable worktree entry commands via YAML config","description":"## Problem\nCurrently, when entering a worktree via Oak TUI, it only creates a new tmux pane with a shell at the worktree path. Users often need to run additional setup commands (e.g., `aws-vault exec profile`, `opencode`, environment activation) every time they switch worktrees. This is repetitive and error-prone.\n\n## Requirements\n\n### User Story\nAs a user, I want to configure custom commands that automatically execute when I enter a worktree, so I can have my development environment ready without manual setup.\n\n### Configuration Format\nCreate a YAML config file at `~/.config/oak-tui/config.yaml` with the following structure:\n\n```yaml\n# Global commands that run for all worktrees\nglobal:\n  commands:\n    - \"aws-vault exec my-profile -- bash\"\n    - \"opencode\"\n\n# Project-specific commands (matched by git root path)\nprojects:\n  /home/user/projects/my-app:\n    commands:\n      - \"source .venv/bin/activate\"\n      - \"npm run dev\"\n  \n  /home/user/projects/other-app:\n    commands:\n      - \"docker-compose up -d\"\n      - \"opencode\"\n\n# Worktree-specific commands (matched by exact worktree path)\nworktrees:\n  /home/user/projects/my-app/feature-branch:\n    commands:\n      - \"git fetch origin\"\n      - \"opencode\"\n```\n\n### Command Execution Priority\n1. **Worktree-specific** commands (if match found)\n2. **Project-specific** commands (if match found and no worktree match)\n3. **Global** commands (if no project/worktree match)\n\n### Command Execution Behavior\n- Commands execute sequentially in the order defined\n- Each command is sent via `tmux send-keys` with `C-m` (Enter) suffix\n- Commands run in the worktree's working directory\n- If a command fails, subsequent commands still execute (no error handling)\n- Empty/missing config means default behavior (just open shell)\n\n## Implementation Notes\n\n### Current Architecture\n\n**Pane Creation Flow:**\n1. `switchToWorktree()` in `tmux-manager.ts:205-315` handles worktree switching\n2. Calls `createPaneAtPath()` at line 334-347 to create new pane\n3. Uses `tmux split-window -h -b -c \"\u003cpath\u003e\"` to create pane at worktree path\n4. Currently no commands are executed after pane creation\n\n**Existing Command Execution Pattern:**\n- `switchToProject()` at line 667 shows the pattern: `execSync(`tmux send-keys -t ${leftPaneId} 'cd \"${projectPath}\"' C-m`)`\n- This is the pattern to use for sending commands to the new pane\n\n**Current Config System:**\n- Config stored in `~/.local/share/oak-tui/config.json` (JSON format)\n- Managed by `theme-manager.ts` with `loadThemePreference()` and `saveThemePreference()`\n- Pattern: ensure DATA_DIR exists, read/parse JSON, merge values, write back\n\n### Implementation Approach\n\n#### 1. Add YAML Parsing Dependency\nBun has built-in YAML support, but may need to add explicit dependency:\n```bash\nbun add js-yaml\nbun add -d @types/js-yaml\n```\n\n#### 2. Create Config Manager Module\nNew file: `scripts/lib/config-manager.ts`\n\n```typescript\ninterface WorktreeConfig {\n  global?: {\n    commands?: string[];\n  };\n  projects?: {\n    [projectPath: string]: {\n      commands?: string[];\n    };\n  };\n  worktrees?: {\n    [worktreePath: string]: {\n      commands?: string[];\n    };\n  };\n}\n\nexport function loadWorktreeConfig(): WorktreeConfig | null\nexport function getCommandsForWorktree(worktreePath: string, projectPath: string): string[]\n```\n\n**Config file location:** `~/.config/oak-tui/config.yaml` (user config directory, not data directory)\n\n**Logic for `getCommandsForWorktree()`:**\n1. Load and parse YAML config\n2. Check for exact worktree path match ‚Üí return those commands\n3. Check for project path match ‚Üí return those commands  \n4. Return global commands\n5. Return empty array if no config or no matches\n\n#### 3. Modify Pane Creation\nUpdate `createPaneAtPath()` in `tmux-manager.ts`:\n\n```typescript\nfunction createPaneAtPath(worktreePath: string, projectPath: string): void {\n  const oakPane = oakPaneId ?? getTmuxPaneId();\n  \n  // Create the pane\n  const newPaneId = execSync(\n    `tmux split-window -h -b -t ${oakPane} -c \"${worktreePath}\" -P -F '#{pane_id}'`,\n    { encoding: 'utf-8' }\n  ).trim();\n  \n  // Get commands from config\n  const commands = getCommandsForWorktree(worktreePath, projectPath);\n  \n  // Execute commands sequentially\n  for (const command of commands) {\n    execSync(`tmux send-keys -t ${newPaneId} '${command}' C-m`);\n    // Small delay between commands to avoid race conditions\n    execSync('sleep 0.1');\n  }\n}\n```\n\n**Also update** the pane creation in `switchToWorktree()` at line 267 (the split-window call) to capture the new pane ID and execute commands.\n\n#### 4. Config File Creation\n- Create `~/.config/oak-tui/` directory if it doesn't exist\n- Provide example config in README or docs\n- Config is optional - missing file means default behavior\n\n### Files to Create/Modify\n\n**New Files:**\n- `scripts/lib/config-manager.ts` - YAML config loading and command resolution\n- `~/.config/oak-tui/config.yaml` - User config file (created by user, provide example)\n\n**Modified Files:**\n- `scripts/lib/tmux-manager.ts` - Update `createPaneAtPath()` and `switchToWorktree()` to execute commands\n- `package.json` - Add `js-yaml` dependency if needed\n\n### Edge Cases \u0026 Considerations\n\n1. **Command escaping:** Commands with quotes/special chars need proper escaping for tmux send-keys\n2. **Long-running commands:** If a command doesn't return (e.g., `npm run dev`), it will block the pane but that's expected behavior\n3. **Interactive commands:** Commands requiring input (like `aws-vault` with MFA) will work since they run in the actual pane\n4. **Config reload:** Config is loaded on each worktree switch, so changes take effect immediately\n5. **Invalid YAML:** Gracefully handle parse errors - log warning and use default behavior\n6. **Path matching:** Use exact string matching for paths (no glob/regex initially)\n\n## Acceptance Criteria\n\n- [ ] YAML config file can be created at `~/.config/oak-tui/config.yaml`\n- [ ] Global commands execute for all worktrees when no specific match\n- [ ] Project-specific commands execute when project path matches\n- [ ] Worktree-specific commands execute when exact worktree path matches\n- [ ] Commands execute sequentially in defined order\n- [ ] Commands are sent via tmux send-keys to the new pane\n- [ ] Missing/invalid config gracefully falls back to default behavior\n- [ ] Config changes take effect on next worktree switch (no restart needed)\n- [ ] Example config documented in README or AGENTS.md\n\n## Example Use Cases\n\n### Use Case 1: AWS Vault + OpenCode\n```yaml\nglobal:\n  commands:\n    - \"aws-vault exec production -- bash\"\n    - \"opencode\"\n```\n\n### Use Case 2: Python Virtual Environment\n```yaml\nprojects:\n  /home/user/projects/python-app:\n    commands:\n      - \"source .venv/bin/activate\"\n      - \"export PYTHONPATH=$PWD\"\n```\n\n### Use Case 3: Docker + Dev Server\n```yaml\nprojects:\n  /home/user/projects/web-app:\n    commands:\n      - \"docker-compose up -d\"\n      - \"npm run dev\"\n```","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-19T13:29:00.037682814+01:00","updated_at":"2026-02-23T13:05:05.552454108+01:00","deleted_at":"2026-02-23T13:05:05.552454108+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-ob5","title":"Left arrow should collapse parent when on child items","description":"## Problem\n\nCurrently, pressing the left arrow (‚Üê) key only collapses the currently selected item if it's a parent (project or folder). When the selection is on a child item (worktree or file), pressing left arrow does nothing.\n\n**Expected behavior:** When on a child item and pressing left arrow, it should collapse the parent item (similar to how file explorers like VS Code, Finder, etc. work).\n\n## Current Behavior\n\n### Projects Tab\n- When on a **project** (parent) that is expanded ‚Üí Left arrow collapses it ‚úì\n- When on a **worktree** (child) ‚Üí Left arrow does nothing ‚úó\n\n### Files Tab  \n- When on a **folder** (parent) that is expanded ‚Üí Left arrow collapses it ‚úì\n- When on a **file** or **collapsed folder** (child) ‚Üí Left arrow does nothing ‚úó\n\n## Desired Behavior\n\n### Projects Tab\n- When on a **project** (parent) that is expanded ‚Üí Left arrow collapses it ‚úì (already works)\n- When on a **worktree** (child) ‚Üí Left arrow collapses the parent project ‚úì (needs implementation)\n\n### Files Tab\n- When on a **folder** (parent) that is expanded ‚Üí Left arrow collapses it ‚úì (already works)\n- When on a **file** or **collapsed folder** (child) ‚Üí Left arrow collapses the parent folder ‚úì (needs implementation)\n\n## Implementation Notes\n\n### Projects Tab (worktree-tui.ts:836-849)\nCurrent code only handles `item.type === \"project\"`. Need to add:\n- When `item.type === \"worktree\"`, use `item.projectIndex` to identify parent project\n- Collapse the parent project by removing it from `expandedProjects` Set\n- Move selection to the parent project (index = item.projectIndex)\n\n### Files Tab (worktree-tui.ts:1048-1059)\nCurrent code only handles `file.isDirectory \u0026\u0026 isExpanded`. Need to add:\n- When on a child file/folder, find the parent folder by traversing up the tree\n- Use `file.depth` to identify nesting level\n- Find the parent by searching backwards in the flattened list for an item with `depth = file.depth - 1`\n- Collapse the parent folder by removing it from `expandedPaths` Set\n- Move selection to the parent folder\n\n### Data Structures Available\n- **Projects:** `getItemAtIndex()` returns `{type, projectIndex, worktreeIndex?}` where `projectIndex` identifies the parent\n- **Files:** `getFileAtIndex()` returns `FileTreeNode` with `{path, depth}` where `depth` indicates nesting level\n\n## Acceptance Criteria\n\n- [ ] Projects tab: Pressing left arrow on a worktree collapses its parent project\n- [ ] Projects tab: Selection moves to the parent project after collapsing\n- [ ] Files tab: Pressing left arrow on a child file/folder collapses the parent folder\n- [ ] Files tab: Selection moves to the parent folder after collapsing\n- [ ] Behavior matches common file explorer UX (VS Code, Finder, etc.)\n- [ ] No regressions in existing left arrow behavior on parent items","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-18T13:10:16.85013389+01:00","updated_at":"2026-02-23T13:05:05.567510767+01:00","deleted_at":"2026-02-23T13:05:05.567510767+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-pkv","title":"Fix tsgolint errors in project-manager.ts and socket-manager.ts","description":"## Files: \n- scripts/lib/project-manager.ts (22 errors)\n- scripts/lib/socket-manager.ts (17 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to array/object params\n- strict-boolean-expressions: Handle nullable values explicitly\n- prefer-nullish-coalescing: Use ?? instead of ||\n- no-unsafe-return/assignment: Type JSON.parse returns\n\n### Common patterns:\n- debug function params need readonly\n- JSON.parse returns need type assertions\n- Nullable string checks need explicit handling","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:19.29818772+01:00","updated_at":"2026-02-23T13:05:05.610319443+01:00","deleted_at":"2026-02-23T13:05:05.610319443+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-qli","title":"Board: Move issue ID to right side next to priority icon","description":"In renderBoard(), move the issue ID from the left side (next to type badge) to the right side (next to priority icon with 1 space gap). Current layout: [Type issue-id ... priority-icon]. New layout: [Type ... issue-id priority-icon]. Implementation: Remove issueId from leftSide, create rightSide BoxRenderable with flexDirection row and gap 1, add issueId and priorityIcon to rightSide, replace priorityIcon with rightSide in badgeLine.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T16:16:30.356014557+01:00","updated_at":"2026-02-16T16:17:01.131541534+01:00","closed_at":"2026-02-16T16:17:01.131541534+01:00"}
{"id":"oak-tui-skill-r7f","title":"Add linting with oxlint and commit hooks with simple-git-hooks","description":"## Overview\nSet up code quality tooling for the project using oxlint (fast Rust-based linter) and simple-git-hooks for pre-commit/commit-msg hooks.\n\n## Tasks\n\n### 1. Install dependencies\n- oxlint (fast Rust-based linter from oxc)\n- oxlint-tsgolint (type-aware TypeScript linting powered by typescript-go)\n- @commitlint/cli and @commitlint/config-conventional\n- simple-git-hooks\n- lint-staged\n\n### 2. Add package.json scripts\n- `prepare`: `simple-git-hooks`\n- `lint`: `oxlint`\n- `lint:fix`: `oxlint --fix`\n- `commitlint`: `commitlint --edit`\n\n### 3. Configure simple-git-hooks in package.json\n```json\n\"simple-git-hooks\": {\n  \"pre-commit\": \"bun lint-staged\",\n  \"commit-msg\": \"bun commitlint --edit $1\"\n}\n```\n\n### 4. Configure lint-staged in package.json\n```json\n\"lint-staged\": {\n  \"*.ts\": [\"oxlint\"]\n}\n```\n\n### 5. Create commitlint.config.js\nUse @commitlint/config-conventional with standard rules for:\n- type-enum (feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert)\n- scope-case (lower-case)\n- subject-empty (never)\n- header-max-length (120)\n- body-leading-blank, footer-leading-blank\n\n### 6. Explore oxlint-tsgolint\nInvestigate enabling type-aware linting via oxlint-tsgolint package (powered by typescript-go).\n\n## Reference\nBased on setup from /home/linux-falko/Dev/movies-deluxe/package.json","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-17T00:17:32.081955666+01:00","updated_at":"2026-02-23T13:05:05.645083724+01:00","deleted_at":"2026-02-23T13:05:05.645083724+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-rk5","title":"Fix @opentui/core API type errors (bold property and KeyHandler.on)","description":"## Problem\n\nThree TypeScript errors in worktree-tui.ts due to incorrect @opentui/core API usage:\n\n### Error 1: Line 256\n```\nObject literal may only specify known properties, and 'bold' does not exist in type 'TextOptions'.\n```\nCode: `bold: activeTab === tab.id` in TextRenderable options\n\n### Error 2: Line 350\n```\nProperty 'bold' does not exist on type 'TextRenderable'.\n```\nCode: `(tabText as TextRenderable).bold = activeTab === tab.id`\n\n### Error 3: Line 465 (actually line 484)\n```\nProperty 'on' does not exist on type 'KeyHandler'. Did you mean to access the static member 'KeyHandler.on' instead?\n```\nCode: `renderer.keyInput.on(\"keypress\", (key) =\u003e {...})`\n\n## Root Cause Analysis\n\n### Bold Property Issues (Errors 1 \u0026 2)\n- TextRenderable extends TextBufferRenderable\n- TextOptions extends TextBufferOptions\n- Neither has a `bold` property\n- Bold styling must be achieved via the `attributes: number` bitmask property\n- Need to find the correct attribute flag for bold text in @opentui/core\n\n### KeyHandler.on Issue (Error 3)\n- KeyHandler extends EventEmitter\u003cKeyHandlerEventMap\u003e\n- EventEmitter should provide .on() method\n- Possible causes:\n  1. TypeScript not recognizing inherited methods\n  2. Need to import EventEmitter types\n  3. May need to use a different event subscription pattern\n\n## Solution Approach\n\n1. **For bold styling**: Replace `bold: true/false` with proper `attributes` bitmask usage. Research @opentui/core for attribute constants (likely BOLD = 1 or similar).\n\n2. **For KeyHandler.on**: \n   - Check if EventEmitter is properly typed\n   - May need to cast or use alternative API\n   - Check @opentui/core examples for correct event handling pattern\n\n## Files to Modify\n- scripts/worktree-tui.ts (lines 256, 350, 484)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-16T22:59:01.656106783+01:00","updated_at":"2026-02-16T23:16:51.318174902+01:00","closed_at":"2026-02-16T23:16:51.318174902+01:00"}
{"id":"oak-tui-skill-sg1","title":"Fix lint errors in socket-manager.ts and project-manager.ts","description":"## Lint Errors\n\n### socket-manager.ts\n- Unused param 'args' in debug() function (line 11)\n\n### project-manager.ts\n- Unused param 'args' in debug() function (line 17)\n\n## Fix\nPrefix unused params with underscore: `..._args: unknown[]`","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:22:11.633989184+01:00","updated_at":"2026-02-23T13:05:05.6270878+01:00","deleted_at":"2026-02-23T13:05:05.6270878+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-tog","title":"Files tab has inconsistent top menu styling (missing bottom gap, full width)","description":"## Summary\nWhen the files tab is active, the top menu/title bar has two styling inconsistencies compared to other tabs:\n1. Missing one-space gap on the bottom of the top menu\n2. The top menu spreads over the full width (not happening on other tabs)\n\n## Current Behavior\n- On the **projects** and **themes** tabs: The top menu has proper spacing and width\n- On the **files** tab: The top menu appears to lose its bottom gap and spreads full width\n\n## Root Cause Analysis\n\n### Issue 1: Missing Bottom Gap\nThe root container has `gap: 1` (ui-renderer.ts:84) which creates spacing between:\n- `titleBox` (top menu)\n- `contentBox` (main content area)\n- `footerBox`\n\nHowever, when the files tab is active, the `searchBox` inside `contentBox` becomes visible with:\n```typescript\n// worktree-tui.ts:266-268\nui.searchBox.visible = true;\nui.searchBox.height = \"auto\";\nui.searchBox.paddingTop = 1;\n```\n\nThe `paddingTop: 1` on the searchBox may be affecting the visual gap calculation, making it appear that the gap between titleBox and contentBox is missing or reduced.\n\n### Issue 2: Full Width Spread\nThe `searchBox` has `width: \"100%\"` (ui-renderer.ts:123), and when it becomes visible, it may influence how the renderer calculates boundaries for the entire `contentBox` and its parent elements, causing a visual rendering artifact where the title area appears to spread differently.\n\n## Relevant Code Locations\n\n| Component | File | Lines | Property |\n|-----------|------|-------|----------|\n| Root gap | `ui-renderer.ts` | 84 | `gap: 1` |\n| Title box | `ui-renderer.ts` | 88-96 | `width: \"100%\"`, `padding: 1` |\n| Content box | `ui-renderer.ts` | 113-119 | `padding: 1` |\n| Search box visibility | `worktree-tui.ts` | 234-236, 266-268 | `visible`, `height`, `paddingTop` |\n| Search box width | `ui-renderer.ts` | 123 | `width: \"100%\"` |\n\n## Potential Fixes\n\n1. **Adjust searchBox paddingTop**: Instead of adding `paddingTop: 1` to searchBox when visible, consider adjusting the contentBox padding or using marginTop on the searchBox\n\n2. **Ensure consistent contentBox padding**: The contentBox has `padding: 1` which should provide consistent spacing. The searchBox's additional `paddingTop: 1` may be creating double spacing in some areas while removing it from others\n\n3. **Review the order of children in contentBox**: Currently searchBox is added after contentScroll (line 157). Consider if the order affects layout\n\n## Acceptance Criteria\n- [ ] Top menu has consistent bottom gap across all tabs\n- [ ] Top menu width is consistent across all tabs\n- [ ] Search box on files tab still has proper spacing from content above","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-16T15:16:10.849790073+01:00","updated_at":"2026-02-16T15:55:57.941437505+01:00","closed_at":"2026-02-16T15:55:57.941437505+01:00"}
{"id":"oak-tui-skill-u0e","title":"Filter closed issues in board to show only today's closures","description":"## Problem\n\nThe board view currently shows ALL closed issues, which can become cluttered over time. Users typically only care about recently closed issues to track daily progress.\n\n## Current Behavior\n\nIn `scripts/lib/beads-manager.ts`, the `groupIssuesByStatus()` function (lines 39-68) pushes all closed issues to `grouped.closed` without any date filtering:\n\n```typescript\nif (issue.status === \"closed\") {\n  grouped.closed.push(issue);\n}\n```\n\n## Desired Behavior\n\nOnly show closed issues that were closed **today** (based on the current date).\n\n## Implementation Approach\n\n1. In `groupIssuesByStatus()`, add date filtering for closed issues\n2. Use the `updated_at` field from `BeadsIssue` (ISO date string) since that reflects when the status changed to closed\n3. Compare the date portion of `updated_at` with today's date\n\nExample logic:\n```typescript\nif (issue.status === \"closed\") {\n  const closedDate = new Date(issue.updated_at).toDateString();\n  const today = new Date().toDateString();\n  if (closedDate === today) {\n    grouped.closed.push(issue);\n  }\n}\n```\n\n## Files to Modify\n\n- `scripts/lib/beads-manager.ts` - `groupIssuesByStatus()` function (line 51-52)\n\n## Notes\n\n- The `BeadsIssue` interface already has `updated_at: string` field (types.ts:70)\n- This is a simple filter addition, no new dependencies needed","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T23:15:35.452786968+01:00","updated_at":"2026-02-16T23:25:40.420183598+01:00","closed_at":"2026-02-16T23:25:40.420183598+01:00"}
{"id":"oak-tui-skill-ud8","title":"Board tab: Search for .beads in subdirectories with root-first priority","description":"## Problem Statement\n\nThe board tab currently relies on the `bd` CLI to find `.beads` directories by searching upward from the active worktree path. This doesn't support projects where `.beads` is located in a subdirectory of the current working directory. Users working in parent directories of beads-enabled projects cannot see their board.\n\n## Current Architecture\n\n### Files Involved:\n- `scripts/lib/beads-manager.ts` - Core beads data fetching logic\n- `scripts/worktree-tui.ts` - Board tab state and rendering coordination\n- `scripts/lib/ui-renderer.ts` - Board UI rendering\n\n### Current Behavior:\n1. Board tab uses `activeWorktreePath` (or falls back to current pane path)\n2. `fetchBeadsIssues()` and `fetchReadyIssues()` run `bd` commands with `cwd: workingDir`\n3. No explicit `.beads` directory detection - relies on `bd` CLI to search upward\n4. If `bd` can't find `.beads` in parent directories, board shows empty\n\n### Key Code Locations:\n- `beads-manager.ts:37-48` - `fetchBeadsIssues()` executes `bd list --json`\n- `beads-manager.ts:55-67` - `fetchReadyIssues()` executes `bd ready --json`\n- `worktree-tui.ts:604` - Calls `fetchAndGroupIssues(activeWorktreePath)`\n\n## Implementation Approach\n\n### Phase 1: Add .beads Directory Search\n\nCreate new function in `beads-manager.ts`:\n\n```typescript\n/**\n * Find .beads directory using breadth-first search.\n * Priority: root first, then shallowest subdirectories.\n * \n * @param startPath - Directory to start search from\n * @returns Path containing .beads directory, or null if not found\n */\nexport function findBeadsDirectory(startPath: string): string | null {\n  // 1. Check root first\n  if (existsSync(join(startPath, \".beads\"))) {\n    return startPath;\n  }\n  \n  // 2. BFS through subdirectories\n  const queue: string[] = [startPath];\n  const visited = new Set\u003cstring\u003e();\n  \n  while (queue.length \u003e 0) {\n    const currentPath = queue.shift()!;\n    if (visited.has(currentPath)) continue;\n    visited.add(currentPath);\n    \n    try {\n      const entries = readdirSync(currentPath);\n      \n      for (const entry of entries) {\n        // Skip ignored directories\n        if (IGNORED_DIRS.has(entry)) continue;\n        \n        const fullPath = join(currentPath, entry);\n        \n        try {\n          const stats = statSync(fullPath);\n          if (!stats.isDirectory()) continue;\n          \n          // Check if this directory contains .beads\n          if (existsSync(join(fullPath, \".beads\"))) {\n            return fullPath; // First one found\n          }\n          \n          queue.push(fullPath);\n        } catch {\n          continue; // Skip permission errors\n        }\n      }\n    } catch {\n      continue; // Skip unreadable directories\n    }\n  }\n  \n  return null;\n}\n```\n\n### Phase 2: Update Beads Fetching Functions\n\nModify both `fetchBeadsIssues()` and `fetchReadyIssues()`:\n\n```typescript\nexport function fetchBeadsIssues(workingDir?: string): BeadsIssue[] {\n  try {\n    const searchPath = workingDir ?? process.cwd();\n    const beadsDir = findBeadsDirectory(searchPath);\n    \n    if (!beadsDir) {\n      return []; // No .beads found\n    }\n    \n    const output = execSync(\"bd list --json\", {\n      encoding: \"utf-8\",\n      timeout: 5000,\n      cwd: beadsDir, // Use directory containing .beads\n      stdio: [\"pipe\", \"pipe\", \"ignore\"],\n    });\n    return parseBeadsIssues(output);\n  } catch {\n    return [];\n  }\n}\n\n// Apply same pattern to fetchReadyIssues()\n```\n\n### Phase 3: Reuse Existing Patterns\n\nImport `IGNORED_DIRS` from `file-tree.ts` or define in `beads-manager.ts`:\n\n```typescript\nconst IGNORED_DIRS = new Set([\n  \"node_modules\", \".git\", \"dist\", \"build\", \".next\",\n  \".cache\", \"coverage\", \"__pycache__\", \".venv\", \"venv\",\n  \".turbo\", \".bun\"\n]);\n```\n\n## Files to Modify\n\n1. **`scripts/lib/beads-manager.ts`** (primary changes):\n   - Add `findBeadsDirectory()` function\n   - Add `IGNORED_DIRS` constant\n   - Modify `fetchBeadsIssues()` to use search\n   - Modify `fetchReadyIssues()` to use search\n   - Add imports: `readdirSync`, `statSync`, `existsSync` from `node:fs`\n\n2. **`scripts/components/file-tree.ts`** (optional):\n   - Export `IGNORED_DIRS` for reuse (currently private)\n\n## Priority Strategy: \"First One Found\"\n\nUse **root-first, breadth-first search (BFS)**:\n\n1. **Root directory first**: Check `startPath/.beads` immediately\n2. **Closest to root**: BFS ensures shallowest subdirectories checked first\n3. **Alphabetical within same depth**: Natural `readdirSync()` order\n\n**Rationale:**\n- Root-level `.beads` is most likely the project root installation\n- BFS finds closest `.beads` to starting point\n- Matches developer intuition (project root \u003e nested subdirectories)\n- Performance: BFS stops at first match\n\n## Acceptance Criteria\n\n- [ ] `.beads` at root directory is detected and used\n- [ ] `.beads` in subdirectory (e.g., `project/backend/.beads`) is found\n- [ ] When multiple `.beads` exist, root takes priority over subdirectories\n- [ ] When multiple `.beads` in subdirectories, closest to root (shallowest) is used\n- [ ] Ignored directories (`node_modules`, `.git`, etc.) are skipped during search\n- [ ] Board shows empty gracefully when no `.beads` found\n- [ ] No performance degradation for projects with `.beads` at root\n- [ ] Permission errors on subdirectories are handled gracefully\n- [ ] No changes needed to `worktree-tui.ts` or `ui-renderer.ts` (interface unchanged)\n\n## Edge Cases \u0026 Considerations\n\n1. **Performance**: Large directories with many subdirectories could be slow\n   - Mitigation: BFS stops at first match, `IGNORED_DIRS` reduces search space\n   - Consider adding max depth limit (e.g., 3 levels deep)\n\n2. **Symlinks**: Could cause infinite loops\n   - Mitigation: Use `visited` Set to track already-checked paths\n   - Consider using `lstatSync()` to detect symlinks and skip them\n\n3. **Permission errors**: Some subdirectories may not be readable\n   - Mitigation: Wrap in try/catch, continue on error\n\n4. **Empty directories**: Should not cause issues\n   - Mitigation: `readdirSync()` returns empty array, loop continues\n\n5. **Multiple .beads at same depth**: Which one wins?\n   - Current: Natural `readdirSync()` order (typically alphabetical)\n   - Alternative: Could sort entries before processing for consistency\n\n6. **Very deep nesting**: Could be slow or hit recursion limits\n   - Mitigation: BFS uses queue (no recursion), consider max depth limit\n\n## Testing Scenarios\n\nAfter implementation, verify:\n\n1. `.beads` at root (most common case)\n2. `.beads` in subdirectory `project/backend/.beads`\n3. Multiple `.beads`: root + subdirectory (root wins)\n4. Multiple `.beads` in different subdirectories (closest to root wins)\n5. No `.beads` anywhere (empty board, no errors)\n6. Large directory tree (performance acceptable)\n7. Permission denied on subdirectory (handled gracefully)\n8. Symlinks in directory tree (no infinite loops)\n\n## Alternative Approaches Considered\n\n### Option A: Parent-only search (simpler)\n- Only search upward (like git finding `.git`)\n- Pros: Simpler, faster, covers most use cases\n- Cons: Doesn't support subdirectory `.beads`\n\n### Option B: Recursive search (more thorough)\n- Use recursive function instead of BFS\n- Pros: Simpler code\n- Cons: Risk of stack overflow, harder to control priority\n\n### Option C: No search (current behavior)\n- Keep relying on `bd` CLI to find `.beads`\n- Pros: No code changes\n- Cons: Doesn't solve the problem\n\n**Chosen: Root-first BFS** - Best balance of functionality, performance, and intuitive priority.\n\n## Debug Logging\n\nAdd debug logs to help troubleshoot:\n\n```typescript\ndebugLog(`Searching for .beads starting from: ${startPath}`);\ndebugLog(`Found .beads at: ${beadsDir}`);\ndebugLog(`No .beads found in ${startPath} or subdirectories`);\n```\n\n## Success Metrics\n\n- Users can see board when working in parent directory of beads project\n- No performance regression for existing workflows\n- Clear priority when multiple `.beads` exist\n- Graceful handling of edge cases (permissions, symlinks, etc.)","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-02-19T17:44:44.092186573+01:00","updated_at":"2026-02-23T13:05:05.545107528+01:00","deleted_at":"2026-02-23T13:05:05.545107528+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"feature"}
{"id":"oak-tui-skill-vzs","title":"DRY: Consolidate debug/setDebugFn pattern","description":"The debug() function and setDebugFn pattern is duplicated in:\n- worktree-tui.ts:108-121\n- socket-manager.ts:11-17\n- project-manager.ts:35-41\n- tmux-manager.ts:21-29\n- issue-popup.ts:16-19\n\nAdditionally, the Object.assign pattern in setDebugFn is broken (doesn't actually set the function). Create a shared debug utility module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T12:46:07.183141517+01:00","updated_at":"2026-02-23T12:54:55.974792329+01:00","closed_at":"2026-02-23T12:54:55.974792329+01:00"}
{"id":"oak-tui-skill-x0i","title":"Fix tsgolint errors in tmux-manager.ts","description":"## File: scripts/lib/tmux-manager.ts (27 errors)\n\n### Error types:\n- prefer-readonly-parameter-types: Add readonly to callback params\n- strict-boolean-expressions: Handle nullable strings (oakPaneId, leftPaneId)\n- prefer-nullish-coalescing: Use ?? instead of ||\n\n### Key locations:\n- Lines 20, 22, 26: debug function params\n- Line 59: oakPaneId || getTmuxPaneId()\n- Lines 79, 83, 92, 94, 100: array callback params (p, a, b)\n- Line 141, 193: !leftPaneId checks\n- Lines 214, 300, 352: oakPaneId || getTmuxPaneId()\n- Line 335: currentLeftPaneId check","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-02-17T00:25:17.285716173+01:00","updated_at":"2026-02-23T13:05:05.6136316+01:00","deleted_at":"2026-02-23T13:05:05.6136316+01:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"oak-tui-skill-x5j","title":"Add Beads issues tab to Oak TUI","description":"## Summary\nAdd a new \"Beads\" tab to Oak TUI that displays beads issues in a kanban-style board layout, similar to the web board view but with columns stacked vertically due to terminal space constraints.\n\n## Screenshot Reference\nThe web board shows 4 columns horizontally: Blocked, Ready, In Progress, Closed\nEach issue card displays:\n- Issue title (truncated with ...)\n- Type badge (Feature, Bug, etc.) with color coding\n- Priority badge (Medium, High, etc.) with color coding  \n- Issue ID (e.g., oak-tui-skill-8bt)\n\n## TUI Adaptation\nDue to terminal width constraints, the horizontal columns must stack vertically:\n```\n== Blocked (0) ==\n(empty)\n\n== Ready (1) ==\n[Feature] [Medium] oak-tui-skill-8bt\n  Allow deleting projects from the recent p...\n\n== In Progress (1) ==\n[Bug] [Medium] oak-tui-skill-tog\n  Files tab has inconsistent top menu stylin...\n\n== Closed (0) ==\n(empty or show recent)\n```\n\n## Implementation Overview\n\n### 1. Update TabId type\nFile: `scripts/lib/types.ts` line 56\nAdd \"beads\" to the TabId union type\n\n### 2. Add to TABS array\nFile: `scripts/worktree-tui.ts` lines 158-162\nAdd `{ id: \"beads\", label: \"Beads\" }`\n\n### 3. Create BeadsIssue interface\nFile: `scripts/lib/types.ts`\n```typescript\ninterface BeadsIssue {\n  id: string;\n  title: string;\n  status: \"open\" | \"in_progress\" | \"blocked\" | \"closed\";\n  priority: number; // 0-4\n  issue_type: \"task\" | \"bug\" | \"feature\" | \"epic\" | \"chore\";\n}\n```\n\n### 4. Create beads data fetching function\nFile: `scripts/lib/beads-manager.ts` (new file)\n- Use `bd list --json` to fetch issues\n- Parse JSON output into BeadsIssue[]\n- Group by status for display\n\n### 5. Create renderBeads() function\nFile: `scripts/lib/ui-renderer.ts`\n- Render 4 vertical sections (Blocked, Ready, In Progress, Closed)\n- Each section has header with count\n- Issue cards show: type badge, priority badge, ID, title\n\n### 6. Add to updateContent()\nFile: `scripts/worktree-tui.ts` in updateContent()\nAdd else if branch for \"beads\" tab\n\n### 7. Add keyboard navigation\nFile: `scripts/worktree-tui.ts`\n- up/down (k/j): Navigate between issues\n- Enter: Show issue details or open in editor\n- r: Refresh issues list\n\n## Color Scheme for Badges\n| Type | Color |\n|------|-------|\n| Feature | Green (#7fd88f) |\n| Bug | Red (#e06c75) |\n| Task | Blue (#5c9cf5) |\n| Epic | Purple (#c678dd) |\n| Chore | Gray (#808080) |\n\n| Priority | Color |\n|----------|-------|\n| P0 (Critical) | Red (#e06c75) |\n| P1 (High) | Orange (#fab283) |\n| P2 (Medium) | Yellow (#e5c07b) |\n| P3 (Low) | Blue (#5c9cf5) |\n| P4 (Lowest) | Gray (#808080) |\n\n## Data Fetching\nUse `execSync` to run:\n```bash\nbd list --json\n```\nThis returns a JSON array with all issue fields needed.\n\n## Acceptance Criteria\n- [ ] New \"Beads\" tab appears in tab bar\n- [ ] Tab shows issues grouped by status (vertical columns)\n- [ ] Each status section shows count in header\n- [ ] Issue cards display type, priority, ID, and title\n- [ ] Keyboard navigation works (up/down/enter)\n- [ ] Colors match the theme\n- [ ] Empty sections show appropriate message","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T15:37:23.195152708+01:00","updated_at":"2026-02-16T15:43:28.489751264+01:00","closed_at":"2026-02-16T15:43:28.489751264+01:00"}
{"id":"oak-tui-skill-y6j","title":"Persist active tab across TUI restarts","description":"## Summary\nWhen the TUI restarts (via hot reload in dev mode or manual restart), it should remember which tab was active and restore it.\n\n## Current Behavior\n- TUI always starts on the Projects tab (`activeTab = 'projects'`)\n- Switching to Board/Files/Themes tab is lost on restart\n\n## Desired Behavior\n- Save the active tab to a persistent file when it changes\n- On startup, read the saved tab and restore it\n- Fall back to 'projects' if no saved state exists\n\n## Implementation\n\n### Storage Location\nUse the existing data directory: `~/.local/share/git-worktree-manager/`\nAdd a new file: `state.json` or `ui-state.json`\n\n### Data Structure\n```json\n{\n  \"activeTab\": \"board\"\n}\n```\n\n### Changes Required\n\n#### 1. Add save function in worktree-tui.ts or new state-manager.ts\n```typescript\nfunction saveUIState(state: { activeTab: TabId }) {\n  const statePath = join(DATA_DIR, 'ui-state.json');\n  writeFileSync(statePath, JSON.stringify(state, null, 2));\n}\n```\n\n#### 2. Add load function\n```typescript\nfunction loadUIState(): { activeTab: TabId } | null {\n  const statePath = join(DATA_DIR, 'ui-state.json');\n  try {\n    const data = readFileSync(statePath, 'utf-8');\n    return JSON.parse(data);\n  } catch {\n    return null;\n  }\n}\n```\n\n#### 3. Call saveUIState when tab changes\nIn the tab switching logic (keyboard Tab key and mouse click on tabs):\n```typescript\nactiveTab = newTab;\nsaveUIState({ activeTab });\nupdateContent();\n```\n\n#### 4. Load state on startup\n```typescript\nconst savedState = loadUIState();\nlet activeTab: TabId = savedState?.activeTab ?? 'projects';\n```\n\n### Validation\n- Validate that loaded tab ID is valid (exists in TABS array)\n- Fall back to 'projects' if invalid\n\n## Acceptance Criteria\n- [ ] Active tab is saved when switching tabs\n- [ ] Active tab is restored on TUI restart\n- [ ] Invalid/missing state falls back to 'projects'\n- [ ] Works with hot reload in dev mode","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-16T15:43:55.760592257+01:00","updated_at":"2026-02-16T15:59:38.321585412+01:00","closed_at":"2026-02-16T15:59:38.321585412+01:00"}
